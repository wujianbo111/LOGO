C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MENU
OBJECT MODULE PLACED IN .\obj\menu.obj
COMPILER INVOKED BY: D:\Keil4\C51\BIN\C51.EXE ..\..\UI\HkcOsd\menu.c OPTIMIZE(SIZE) BROWSE INCDIR(..\..\DRIVER\INC;..\..
                    -\KERNEL\SCALER\INC;..\..\KERNEL\SYSTEM\INC;..\..\LIB\INC;..\..\PANEL\INC;..\..\BOARD;..\..\DRIVER\INC;..\..\KERNEL\SYSTE
                    -M\INC\AOC2011;..\..\DRIVER\extDEVICE\INC;..\..\MODEL;..\..\CONFIG;..\..\PANEL;..\..\UI\F_LOGO\INC;..\..\UI\HkcOsd\INC) D
                    -EFINE(ModelName=JRY_TESTBOARD_C_BOARD) DEBUG OBJECTEXTEND PRINT(.\list\menu.lst) OBJECT(.\obj\menu.obj)

line level    source

   1          #include <stdlib.h>
   2          #include <string.h>
   3          #include "types.h"
   4          #include "board.h"
   5          #include "global.h"
   6          #include "debug.h" //change position eshin
   7          #include "keypaddef.h"
   8          #include "menudef.h"
   9          #include "keypad.h"
  10          #include "ms_rwreg.h"
  11          #include "drvosd.h"
  12          #include "msosd.h"
  13          #include "msosdfunction.h"
  14          #include "menufunc.h"
  15          #include "menustr.h"
  16          #include "menutbl.h"
  17          #include "ms_reg.h"
  18          #include "misc.h"
  19          #include "nvram.h"
  20          #include "adjust.h"
  21          #include "userpref.h"
  22          #include "power.h"
  23          #include "msdlc.h"
  24          #include "detect.h"
  25          #include "PropFont.h"
  26          #include "Panel.h"
  27          #include "GPIO_DEF.h"
  28          #include "CommonLoadCPnCompressFont.h"
  29          #include "FactoryString.h"
  30          
  31          #if     1//def ReduceDDC
  32          #include "ddc.h"
  33          #endif
  34          
  35          #if HotInputSelect
  36          #include "mStar.h"
  37          #endif
  38          
  39          
  40          #if ((DEBUG_FLASHADDR&&USEFLASH))
              #include "msflash.h"
              #endif
  43          
  44          #if MWEFunction
  45          #include "MsACE.h"
  46          #include "msdlc.h"
  47          #endif
  48          
  49          #include "Msflash.h"
  50          
  51          
  52          #if Hot_Corss_ColorSelect||Hot_Corss_FY_ColorSelect||Hot_Corss_FND_Select
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 2   

              extern void DynamicLoadHotCorssIcon( BYTE Mode );
              #endif
  55          
  56          
  57          extern void DynamicLoadHotIconFont( void );
  58          void DrawOsdSubMenu( BYTE menupage );
  59          
  60          extern void printData(char *str, WORD value);
  61          extern void printMsg(char *str);
  62          extern void msAccOnOff(BYTE on);
  63          #if HotInputSelect 
  64          extern Bool CheckSourceKeyStatus(void);
  65          #endif
  66          #if Enable_Gamma
              extern void mStar_SetupGamma(BYTE GamaMode);
              #endif
  69          
  70          
  71          #if OsdHelpKeyType ==    OsdHelpKey_Under ||OsdHelpKeyType ==    OsdHelpKey_Right
              void    UpdataHelyKeyShowInMenu(void);  
              #endif
  74          
  75          
  76          extern void DrawNum(BYTE xPos,BYTE yPos,char len,WORD value);           //110316 Modify
  77          #define CurrentMenu     tblMenus[MenuPageIndex]
  78          #define PrevMenuPage        CurrentMenu.PrevPage
  79          #define CurrentMenuItems    CurrentMenu.MenuItems
  80          #define MenuItemCount       CurrentMenu.ItemCount
  81          #define CurrentMenuItem     CurrentMenu.MenuItems[MenuItemIndex]
  82          #define NextMenuPage        CurrentMenuItem.NextPage
  83          #define CurrentMenuItemFunc CurrentMenuItem.KeyFunction
  84          #define KeyEvent        CurrentMenuItem.KeyEvents[KeypadButton]
  85          
  86          /*
  87          #define WAIT_V_OUTPUT_BLANKING_START()   { if(!SyncLossState()&&PanelOnFlag){SetTimOutConter(30);while(((m
             -sReadByte(SC0_E0)&BIT0)==0)&&bTimeOutCounterFlag);\
  88                                                  SetTimOutConter(30);while(((msReadByte(SC0_E0)&BIT0)!=0)&&bTimeOut
             -CounterFlag);}}//20130227 modify for DC OFF issue
  89          */
  90          //========================================================================
  91          //========================================================================
  92          //BYTE  MenuPageIndex = 0;
  93          //BYTE  MenuItemIndex = 0;
  94          BYTE xdata PrevMenuItemIndex = 0;
  95          BYTE xdata TurboKeyCounter = 0;
  96          BYTE xdata PrevPage = 0;
  97          BYTE xdata moveX=50;
  98          BYTE xdata moveY=50;
  99          
 100          //========================================================================
 101          extern  BYTE GetMenuItemIndex(BYTE menuPageIndex);
 102          BYTE GetPrevItem(MenuItemType *menuItem);
 103          BYTE GetNextItem(MenuItemType *menuItem);
 104          
 105          
 106          Bool ExecuteKeyEvent(MenuItemActionType menuAction);
 107          void DrawOsdMenu(void);
 108          void DrawOsdMenuItem(BYTE drawIndex, MenuItemType *menuItem);
 109          void DrawOsdMenuItemText(BYTE itemIndex, MenuItemType *menuItem);
 110          void DrawOsdMenuItemValue(BYTE itemIndex, DrawValueType *valueItem);
 111          void DrawOsdMenuItemNumber(BYTE itemIndex, DrawNumberType *numberItem);
 112          void DrawOsdMenuItemGuage(BYTE itemIndex, DrawGuageType *guageItem);
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 3   

 113          void DrawOsdMenuItemRadioGroup(BYTE itemIndex, DrawRadioGroupType *RadioItem);
 114          //Bool DrawTimingInfo(void);
 115          // 2006/11/10 10:0PM by KK move to userpref.c void SaveFactorySetting( BYTE itemIndex );
 116          #if (DisplayLogo!=NoBrand)//130306 Modify
 117          extern void DrawLogo(void);
 118          #endif
 119          void DrawOsdBackGround(void);
 120          Bool DrawTimingInfo(void);
 121          
 122          #if 0
              extern   Bool SetSR_DEMOSize(BYTE ucSize,WORD DEMO_Hsize);
              #endif
 125          
 126          
 127          
 128          
 129          #if ENABLE_OVER_SCAN
              extern void DynamicLoadFont_RatioStatus(void);
              #endif
 132          
 133          
 134          //=========================================================================
 135          void Menu_InitVariable(void)
 136          {
 137   1          MenuPageIndex = RootMenu;
 138   1          MenuItemIndex = 0;
 139   1          OsdCounter = 0;
 140   1          HotKeyCounter = 0;
 141   1              #if 0
                  HotKeyMinusCounter = 0;
                      #endif
 144   1              #if ENABLE_OVER_SCAN && AudioFunc       //121211 Modify
                  HotKeyPlusCounter = 0;
                      #endif
 147   1      
 148   1          if (!PowerOnFlag)
 149   1          {
 150   2              MenuPageIndex = PowerOffMenu;
 151   2          }
 152   1      
 153   1      }
 154          
 155          void Menu_InitAction(void)
 156          {
 157   1      #if DisplayPowerOnLogo
 158   1          if(UserPrefLogoON==0)       //120420 Modify
 159   1              {
 160   2                  Clr_DisplayLogoFlag();
 161   2              }
 162   1       #endif 
 163   1      
 164   1          MenuItemIndex = 0;
 165   1       #if DisplayPowerOnLogo
 166   1          if (DisplayLogoFlag)
 167   1          {  
 168   2              #if MWEFunction //nick add for U type IC can't turn off MEW function
 169   2                  #if (CHIP_ID==CHIP_TSUMU)
                              msAccSetup( 0, 0, 0, 0 );
                          #endif
 172   2              #endif
 173   2      
 174   2              if (MenuPageIndex == LogoMenu)
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 4   

 175   2              {
 176   3                  return ;
 177   3              }
 178   2              MenuPageIndex = LogoMenu;
 179   2      
 180   2              #if Enable_Rotate180Func
                      mStar_SetupPath();
                      mStar_SetupFreeRunMode();
                      #endif
 184   2      
 185   2                      
 186   2          }
 187   1              else    
 188   1      #endif          
 189   1              {
 190   2              if (UnsupportedModeFlag)
 191   2              {
 192   3                  MenuPageIndex = UnsupportedModeMenu;
 193   3                  moveX=50;   //111223 Modify
 194   3                  moveY=50;   //111223 Modify
 195   3              }
 196   2              else if (SyncLossState())
 197   2              {
 198   3                  if (CableNotConnectedFlag)
 199   3                  {
 200   4                      if (DoBurninModeFlag)
 201   4                      {
 202   5                                  #if FactoryLedFlicker_Enable
                                          #else                       
 204   5                              Power_TurnOnAmberLed(); 
 205   5                                  #endif      
 206   5                              MenuPageIndex = BurninMenu;
 207   5                      }
 208   4                      else
 209   4                      {
 210   5                          #if Dual
 211   5                                              if ((UserPrefInputSelectType != INPUT_PRIORITY_AUTO) )
 212   5                                              {
 213   6                                                      MenuPageIndex = InputInfoMenu;
 214   6                                                      ExecuteKeyEvent(MIA_RedrawMenu);
 215   6                                                      Delay1ms(2000);
 216   6                                                      Osd_Hide();
 217   6                                                      Delay1ms(50);   
 218   6                                              }
 219   5                              MenuPageIndex = StandbyMenu;
 220   5                          #else 
                                                #if INPUT_TYPE==INPUT_1A   //071225 for Cable not connectd if analog only 
                                      MenuPageIndex = CableNotConnectedMenu;//
                                          OsdCounter=60;
                                      moveX=UserPrefOsdHStart;
                                      moveY=UserPrefOsdVStart;
                                    #else
                                      MenuPageIndex = StandbyMenu; //CableNotConnectedMenu;//later will check if cancel 
             -CableNotConnectedMenu or not
                                                #endif        
                                  #endif
 230   5                      }
 231   4                  }
 232   3                  else
 233   3                  {
 234   4                              #if Dual
 235   4                              if ((UserPrefInputSelectType != INPUT_PRIORITY_AUTO) )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 5   

 236   4                              {
 237   5                                      MenuPageIndex = InputInfoMenu;
 238   5                                      ExecuteKeyEvent(MIA_RedrawMenu);
 239   5                                      Delay1ms(2000);
 240   5                                      Osd_Hide();
 241   5                                      Delay1ms(50);
 242   5                              }
 243   4                              #endif
 244   4                        #if ENABLE_DEBUG
                                printMsg("55555555555555");
                                #endif
 247   4                      MenuPageIndex = StandbyMenu;
 248   4                  }
 249   3            
 250   3              }
 251   2      
 252   2              //  else if (UnsupportedModeFlag)
 253   2              //      MenuPageIndex=UnsupportedModeMenu;
 254   2              /******For PE Request*********
 255   2              else if (FactoryModeFlag)
 256   2              {
 257   2                  MenuPageIndex = AutoColorMenu;
 258   2              }
 259   2              ****************************/
 260   2           #if ((ModelName==JRY_L58VHN_GV3)||(ModelName==JRY_L58CDT9_GV3)||(ModelName==JRY_L58CDT9_EV1)||(ModelN
             -ame==JRY_L58CDT9_PV1))
                    else if (UserPrefAutoTimes == 0 && SrcInputType < Input_Digital)
                   #else
 263   2               else if (UserPrefAutoTimes == 0 && SrcInputType < Input_Digital&&(!FactoryModeFlag))
 264   2           #endif             
 265   2              {     
 266   3                  MenuPageIndex = AutoMenu;
 267   3              }
 268   2              else
 269   2              {
 270   3                  if (ShowInputInfoFlag)//)//071226
 271   3                  {
 272   4                       Clr_ShowInputInfoFlag();
 273   4                       {
 274   5                           MenuPageIndex = InputInfoMenu;
 275   5                           OsdCounter = 3;
 276   5                       }
 277   4                  }
 278   3                  else
 279   3                      MenuPageIndex = RootMenu;
 280   3              }
 281   2          }
 282   1      
 283   1              //OsdCounter = 0; // 071221
 284   1      
 285   1              if (SrcInputType != UserPrefInputType&&!SyncLossState())
 286   1          {
 287   2               #if !USEFLASH
                              NVRam_WriteByte(nvrMonitorAddr(InputType), SrcInputType);
                       #else
 290   2                      UserPref_EnableFlashSaveBit(bFlashSaveMonitorBit); 
 291   2               #endif
 292   2              UserPrefInputType = SrcInputType;
 293   2               
 294   2          }
 295   1              
 296   1          
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 6   

 297   1                      if(InputTimingChangeFlag)       //110311 Modify
 298   1                      {
 299   2                              #if DisplayPowerOnLogo
 300   2                              if(!DisplayLogoFlag)
 301   2                              #endif  
 302   2                              {
 303   3                                      MenuPageIndex = RootMenu;
 304   3                                      OsdCounter = 0;
 305   3                                      Clr_OsdTimeoutFlag();
 306   3                                      return;
 307   3                              }
 308   2                      }
 309   1      
 310   1      #if 0//DEBUG_HOTSWITCH
                  printData("Menu_InitActionB4:%d", MenuPageIndex);
              #endif
 313   1                  
 314   1              ExecuteKeyEvent(MIA_RedrawMenu);
 315   1      
 316   1      #if 0//DEBUG_HOTSWITCH
                  printData("Menu_InitActionB4:%d", MenuPageIndex);
              #endif
 319   1          
 320   1          if (UnsupportedModeFlag)
 321   1          {
 322   2              if (!FreeRunModeFlag && SrcInputType < Input_Digital)
 323   2              {
 324   3                  if (UserPrefAutoTimes == 0)
 325   3                  {
 326   4                      AutoConfig();
 327   4                  }
 328   3              }
 329   2          }
 330   1      }
 331          
 332          BYTE MenuActionProcess(BYTE value)
 333          {
 334   1          BYTE xdata menuAction = value;
 335   1      
 336   1      // power and menu use same key,so the action must check again!
 337   1              if(PowerKeyFlag && PowerOnFlag)
 338   1              {
 339   2                  if(PowerOffFlag) //set flag while 3 sec
 340   2                  {
 341   3                 menuAction = MIA_Power;
 342   3                  }
 343   2                  else // less 3 sec
 344   2              {               
 345   3                      if(MainOSDFlag) // show osd menu while release key
 346   3                  {
 347   4                      if (MenuPageIndex < RootMenu || MenuPageIndex == LogoMenu)
 348   4                      {
 349   5                          menuAction = MIA_Nothing;
 350   5      
 351   5                      }
 352   4                      else
 353   4                      {
 354   5                                      menuAction = MIA_GotoNext;
 355   5                      }
 356   4                      Clr_MainOSDFlag();
 357   4                      Clr_PowerKeyFlag();
 358   4                      Clr_DoKeyCountFlag();
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 7   

 359   4                  }
 360   3                  else
 361   3                      menuAction = MIA_Nothing;
 362   3              }
 363   2              }
 364   1      
 365   1      
 366   1      
 367   1      #if DISABLE_VGA_OR_DVI_OSD_HotKeyVolume && ENABLE_OSD_HotKeyVolume
                      if( MenuPageIndex == RootMenu )
                      {
                              if( (CURRENT_INPUT_IS_VGA() || CURRENT_INPUT_IS_DVI()) && menuAction == MIA_VOL )
                              {
                                      menuAction = MIA_Expansion;
                              }
                      }
              #endif
 376   1      
 377   1      
 378   1          if (menuAction)
 379   1          {
 380   2        
 381   2              if (!InputTimingStableFlag)
 382   2              // prevent osd action while mode changing
 383   2              {
 384   3                  if (menuAction != MIA_Power)
 385   3                  {
 386   4                      menuAction = MIA_Nothing;
 387   4                  }
 388   3              }
 389   2      
 390   2      #if DEBUG_HOTSWITCH
                  printData("MenuActionProcessB4:%d", MenuPageIndex);
              #endif
 393   2       
 394   2              if (ExecuteKeyEvent(menuAction))
 395   2              {
 396   3      #if DEBUG_HOTSWITCH
                  printData("MenuActionProcess:%d", MenuPageIndex);
              #endif
 399   3                  if (MenuPageIndex > RootMenu)
 400   3                  {
 401   4                      ResetOsdTimer();
 402   4                  }
 403   3                  Clr_OsdTimeoutFlag();
 404   3              }
 405   2              if (menuAction == MIA_IncValue || menuAction == MIA_DecValue || menuAction == MIA_Auto)
 406   2              {
 407   3                  if (TurboKeyCounter < 100)
 408   3                  {
 409   4                      TurboKeyCounter++;
 410   4                  }
 411   3              }
 412   2              #if ECO
 413   2                  else if ((menuAction == MIA_Exit) || (menuAction == MIA_GotoECO))
 414   2              #else
                          else if (menuAction == MIA_Exit)
                      #endif
 417   2              {
 418   3                  Delay1ms(150);
 419   3                  KeypadButton = BTN_Repeat;
 420   3              }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 8   

 421   2          }
 422   1          else
 423   1          {
 424   2              TurboKeyCounter = 0;
 425   2          }
 426   1      
 427   1      
 428   1          return menuAction;
 429   1      
 430   1      }
 431          
 432          
 433          void Menu_OsdHandler(void)
 434          {
 435   1          BYTE xdata menuAction;
 436   1          
 437   1      
 438   1          if( !TPDebunceCounter )
 439   1          {
 440   2              TPDebunceCounter = SKPollingInterval;
 441   2              Key_ScanKeypad();
 442   2      
 443   2              
 444   2      #if DEBUG_VIRTUAL_KEY
                              if(KeyDebug == KEY_EXIT)
                      KeypadButton = BTN_Exit;
                              else if(KeyDebug == KEY_MINUS)
                              KeypadButton = BTN_Minus;
                              else if(KeyDebug == KEY_MENU)
                              KeypadButton = BTN_Menu;
                              else if(KeyDebug == KEY_PLUS)
                              KeypadButton = BTN_Plus;
                              else if(KeyDebug == KEY_POWER)
                              KeypadButton = BTN_Power;
                              
              #endif
 457   2      
 458   2      #if Enable_ButtonKeyLongPressFunction
              #if Enable_Exit_LongPressKeyFunction
                      if (KeypadButton == BTN_ExitPressKey)
                      {
                          menuAction = MIA_Auto;
                      }
                       else   
              #endif          
              #endif
 467   2              if (KeypadButton >= BTN_EndBTN)
 468   2              {
 469   3                  menuAction = MIA_Nothing;
 470   3              }
 471   2              else if (CurrentMenuItem.KeyEvents)
 472   2              {
 473   3                  menuAction = *((CurrentMenuItem.KeyEvents) + KeypadButton);     
 474   3              }
 475   2      
 476   2      #if DEBUG_VIRTUAL_KEY
                              KeyDebug=KEY_NOTHING;
                              KeypadButton=k;
              #endif
 480   2                      
 481   2      
 482   2              menuAction = MenuActionProcess(menuAction);
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 9   

 483   2           
 484   2           }
 485   1      
 486   1              #ifdef OffPower
                      if((!PowerSavingFlag) && ShowOffPowerWarningFlag)
                      {
                              ShowOffPowerWarningFlag = 0;
                              MenuPageIndex = OffPowerWarningMenu;
                              MenuItemIndex = 0;
                              ExecuteKeyEvent( MIA_RedrawMenu );
                              OsdCounter = 10;
                              Clr_OsdTimeoutFlag();
                      }
                      #endif
 497   1              
 498   1      
 499   1          if (OsdTimeoutFlag)
 500   1          {
 501   2      #if DEBUG_HOTSWITCH
                  printData("OsdTimeoutFlag:%d", MenuPageIndex);
              #endif
 504   2      
 505   2           //   if (CurrentMenuItemFunc.ExecFunction)
 506   2                 // CurrentMenuItemFunc.ExecFunction();
 507   2      
 508   2                      if (SaveSettingFlag)//To Save The Monitor Setting When OSD Time Out
 509   2                      {
 510   3                              Clr_SaveSettingFlag();
 511   3                              SaveUserPref();
 512   3                      }
 513   2      
 514   2              Clr_OsdTimeoutFlag();
 515   2      
 516   2                      
 517   2              if (DisplayLogoFlag)
 518   2              {
 519   3                  Clr_DisplayLogoFlag();
 520   3                  Power_TurnOffPanel();
 521   3                  drvOSD_FrameColorEnable(FALSE);
 522   3                  LoadCommonFont();
 523   3      
 524   3              }
 525   2                      
 526   2                      if( BackToUnsupportFlag && UnsupportedModeFlag) //111223 Modify
 527   2                      {
 528   3                              MenuPageIndex = UnsupportedModeMenu;
 529   3                              moveX=50;
 530   3                              moveY=50;
 531   3                              Osd_Hide();
 532   3                              Clr_BackToUnsupportFlag();
 533   3                              Clr_BackToStandbyFlag();
 534   3                      }
 535   2                      else if( BackToStandbyFlag )    //111223 Modify
 536   2                      {
 537   3                  #if DEBUG_HOTSWITCH
                              printData("BackToStandbyFlag:%d", MenuPageIndex);
              //                              printData("HotInputSelectMenu:%d", MessageAndroidOnMenu);
                          #endif
 541   3                              #message "OSD Hide and do its function disable"
*** MESSAGE C320 IN LINE 541 OF ..\..\UI\HkcOsd\menu.c: "OSD Hide and do its function disable"
 542   3                              #if 0//HotInputSelect   //111223 Modify
                                       if (MenuPageIndex==HotInputSelectMenu) //120413 Modify
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 10  

                                      {               
                                            #if ENABLE_VGA_INPUT
                                              if ((MenuItemIndex == INPUT_PRIORITY_VGA)&&(SrcInputType != Input_VGA))
                                              {
                                                      ChangeSourceToAnalog();
                                                      MenuPageIndex = RootMenu;                
                                              }
                                              else
                                              #endif
                                              #if ENABLE_DVI_INPUT
                                              if ((MenuItemIndex==INPUT_PRIORITY_DVI)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToDigital();
                                                      MenuPageIndex = RootMenu;                
                                              }       
                                              else 
                                              #endif  
                                               #if ENABLE_HDMI_INPUT
                                              if ((MenuItemIndex==INPUT_PRIORITY_HDMI)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToHDMI();                                                   
                                                      MenuPageIndex = RootMenu;                
                                              }       
                                              else 
                                               #if ENABLE_HDMI2ND_INPUT       
                                              if ((MenuItemIndex==INPUT_PRIORITY_HDMI2ND)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToHDMI();                                                   
                                                      MenuPageIndex = RootMenu;                
                                              }       
                                              else
                                              #endif
                                              #endif
                                              #if ENABLE_DP_INPUT
                                               if ((MenuItemIndex==INPUT_PRIORITY_DP)&&(SrcInputType != Input_Displayport))
                                              {
                                                      ChangeSourceToDP(); 
                                                      MenuPageIndex = RootMenu;                
                                              }
                                              else
                                              #endif
                                                      MenuPageIndex = StandbyMenu;             
                                      }
                                      else
                                      #endif
 589   3                              {
 590   4                                      MenuPageIndex = StandbyMenu;
 591   4                              }
 592   3                              Osd_Hide(); //110224 for OSD garbage
 593   3                              Clr_BackToStandbyFlag();
 594   3                      }
 595   2      #message "OSD Hide and do its function disable"         
*** MESSAGE C320 IN LINE 595 OF ..\..\UI\HkcOsd\menu.c: "OSD Hide and do its function disable" 
 596   2      #if 0// HotInputSelect  //111223 Modify
                              else if (MenuPageIndex==HotInputSelectMenu)
                              {               
              
                                              #if ENABLE_VGA_INPUT
                                              if ((MenuItemIndex == INPUT_PRIORITY_VGA)&&(SrcInputType != Input_VGA))
                                              {
                                                      ChangeSourceToAnalog();  
                                              }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 11  

                                              else
                                              #endif
                                              #if ENABLE_DVI_INPUT
                                              if ((MenuItemIndex==INPUT_PRIORITY_DVI)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToDigital();         
                                              }       
                                              else 
                                              #endif  
                                               #if ENABLE_HDMI_INPUT
                                              if ((MenuItemIndex==INPUT_PRIORITY_HDMI)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToHDMI();                                                            
                                              }       
                                              else 
                                               #if ENABLE_HDMI2ND_INPUT       
                                              if ((MenuItemIndex==INPUT_PRIORITY_HDMI2ND)&&(SrcInputType != Input_Digital))
                                              {
                                                      ChangeSourceToHDMI();                                                            
                                              }       
                                              else
                                              #endif
                                              #endif
                                              #if ENABLE_DP_INPUT
                                               if ((MenuItemIndex==INPUT_PRIORITY_DP)&&(SrcInputType != Input_Displayport))
                                              {
                                                      ChangeSourceToDP();      
                                              }
                                              else 
                                              #endif
                                                      Delay1ms(10);
                              
                                              MenuPageIndex = RootMenu;                
              
                              }
              #endif          
 641   2      #if INPUT_TYPE==INPUT_1A    //071225 show "no sync" after show "CableNotConnected" 
                              else if((MenuPageIndex==CableNotConnectedMenu)&&SyncLossState()&&!InputTimingChangeFlag&&InputTimingStab
             -leFlag)
                              {       
                                  Osd_Hide();
                                      Delay1ms(200);
                                  MenuPageIndex=StandbyMenu;
                                  ExecuteKeyEvent(MIA_RedrawMenu);
                              }
              #endif                          
 650   2      #message "OSD Hide and do its function disable"
*** MESSAGE C320 IN LINE 650 OF ..\..\UI\HkcOsd\menu.c: "OSD Hide and do its function disable"
 651   2      #if 0//(INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)         //120322 Modify
              #if ENABLE_AutoDetech
                              else if (MenuPageIndex==InputSelectMenu)
                              {               
                                      if (MenuItemIndex==0)
                                              SetInputToAuto();
                          #if  INPUT_TYPE == INPUT_2H||INPUT_TYPE == INPUT_1D1H1DP
                                      else if (MenuItemIndex==1)
                                              SetInputToDigital();
                          #else                       
                                      else if (MenuItemIndex==1) 
                                              SetInputToAnalog();
                              #endif
                               #if INPUT_TYPE == INPUT_1A1D||INPUT_TYPE == INPUT_1A2D|| INPUT_TYPE == INPUT_1A2H1DP||INPUT_TYPE ==
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 12  

             - INPUT_1A1D1H||INPUT_TYPE == INPUT_1A1D1DP ||INPUT_TYPE == INPUT_1A1H1DP ||INPUT_TYPE == INPUT_1A1D1H1DP      //131113 fay
                                      else if (MenuItemIndex==2)
                                              SetInputToDigital();
                               #endif
                              #if ENABLE_HDMI
                                      #if INPUT_TYPE == INPUT_1A1H||INPUT_TYPE == INPUT_1D1H1DP
                                      else if (MenuItemIndex==2) 
                                              SetInputToHDMI();
                                      #elif INPUT_TYPE == INPUT_1A2D||INPUT_TYPE == INPUT_1A1D1H      //131113 fay
                                      else if (MenuItemIndex==3) 
                                              SetInputToHDMI();
                              #elif (INPUT_TYPE == INPUT_1A1D1H1DP||INPUT_TYPE == INPUT_1A2H1DP)
                                  else if (MenuItemIndex==3) 
                                      SetInputToHDMI();       
                              #elif INPUT_TYPE == INPUT_2H
                                      else if (MenuItemIndex==2) 
                                              SetInputToHDMI();       
                                      #endif
                              #endif
                         #if ENABLE_DP_INPUT
                              #if (INPUT_TYPE == INPUT_1A1D1H1DP||INPUT_TYPE == INPUT_1A2H1DP)
                                                      else if (MenuItemIndex==4) 
                                                      SetInputToDP();
                                              #elif INPUT_TYPE == INPUT_1A1D1DP       //130924 xiandi
                                  else if (MenuItemIndex==3) 
                                  SetInputToDP();             
                              #elif INPUT_TYPE == INPUT_1A1H1DP||INPUT_TYPE == INPUT_1D1H1DP  //130924 xiandi
                                                              else if (MenuItemIndex==3) 
                                                              SetInputToDP();         
                              #elif INPUT_TYPE == INPUT_1A1DP //20151126 alpha
                                                              else if (MenuItemIndex==2) 
                                                              SetInputToDP();
                              #endif
                         #endif        
                                      MenuPageIndex = RootMenu;                
                              }
              #endif          
              #endif
 702   2      
 703   2      
 704   2      
 705   2              else if (MenuPageIndex > RootMenu)
 706   2              {       
 707   3                      MenuPageIndex = RootMenu;
 708   3              }
 709   2                      MenuItemIndex = 0;
 710   2                      ExecuteKeyEvent(MIA_RedrawMenu);
 711   2      
 712   2          }
 713   1      
 714   1      
 715   1          if (!DisplayLogoFlag)
 716   1          // 2006/10/18 9:17PM by Emily for AC on but do burnin
 717   1          {
 718   2              if (DoBurninModeFlag && ChangePatternFlag)
 719   2              // for burnin mode
 720   2              {
 721   3                  Clr_ChangePatternFlag();
 722   3                  PatternNo = (PatternNo + 1) % 5;
 723   3                  mStar_AdjustBackgoundColor(PatternNo);
 724   3              }
 725   2          }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 13  

 726   1          if (ms500Flag)
 727   1          // for moving osd position
 728   1          {
 729   2              Clr_ms500Flag();
 730   2      
 731   2              
 732   2              if (CurrentMenu.Flags &mpbMoving && !PowerSavingFlag)
 733   2              // && FreeRunModeFlag) // for led flash
 734   2              {
 735   3                  if (ReverseXFlag)
 736   3                  {
 737   4                      if (moveX == 0)
 738   4                      {
 739   5                          Clr_ReverseXFlag();
 740   5                      }
 741   4                      else if(moveX < 0)
 742   4                      {
 743   5                          moveX = 0;
 744   5                      }
 745   4                      else if(moveX >100)
 746   4                      {
 747   5                          moveX = 100;
 748   5                      }
 749   4                      else
 750   4                      {
 751   5                          moveX -= 1;
 752   5                      }
 753   4                  }
 754   3                  else
 755   3                  {
 756   4                      moveX++;
 757   4                  }
 758   3                  if (moveX >= 100)
 759   3                  {
 760   4                      Set_ReverseXFlag();
 761   4                  }
 762   3                  if (ReverseYFlag)
 763   3                  {
 764   4                      if (moveY == 0)
 765   4                      {
 766   5                          Clr_ReverseYFlag();
 767   5                      }
 768   4                      else if(moveY < 0)
 769   4                      {
 770   5                          moveY = 0;
 771   5                      }
 772   4                      else if(moveY >100)
 773   4                      {
 774   5                          moveY = 100;
 775   5                      }
 776   4                      else
 777   4                      {
 778   5                          moveY -= 2;
 779   5                      }
 780   4                  }
 781   3                  else
 782   3                  {
 783   4                      moveY += 2;
 784   4                  }
 785   3                  if (moveY >= 100)
 786   3                  {
 787   4                      Set_ReverseYFlag();
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 14  

 788   4                  }
 789   3                  //printData("--->osd X:%d",moveX);
 790   3                  //printData("--->osd Y:%d",moveY);
 791   3                  Osd_SetPosition(moveX, moveY);
 792   3              }
 793   2          }
 794   1      
 795   1          
 796   1       #if F_ShowVsync_Enable
               if (MenuPageIndex==FactoryMenu && FreeSyncFlag)
               {
                  Clr_FreeSyncFlag();
                   Osd_Set256TextColor( CP_WhiteColor<<4|CP_BlueColor, Color_2);
                   DrawNum ( 17, 25,3,GetVsyncValue());
               }
              #endif
 804   1      
 805   1      #if ColorTool_Clear_Time
 806   1       if (PowerOnFlag)
 807   1       {
 808   2              if(DDCCIAutoColorFlag)
 809   2              {
 810   3                     #if ((ModelName==JRY_L58VHN_GV3)||(ModelName==JRY_L58CDT9_GV3)||(ModelName==JRY_L58CDT9_EV1)||(Mod
             -elName==JRY_L58CDT9_PV1))
                            Set_FactoryModeFlag();
                            MenuPageIndex=FactoryMenu;
                             MenuItemIndex=0;
                             DrawOsdMenu();
                              Clr_DDCCIAutoColorFlag();
                              AutoColor();
                              Delay1ms(2000);
                              Clr_FactoryModeFlag();
                               menuAction = MIA_RedrawMenu;
                             MenuPageIndex = RootMenu;
                             MenuItemIndex = 0;
                              Osd_Hide();
                              #else  
 824   3                      Clr_DDCCIAutoColorFlag();
 825   3                      AutoColor();
 826   3                      #endif
 827   3              }
 828   2      
 829   2              if(DDCCResetTimeFlag)
 830   2              {
 831   3                      //if(DisplayLogoFlag) return;
 832   3      
 833   3                      Clr_DDCCResetTimeFlag();
 834   3                      Clr_FactoryModeFlag();
 835   3                      Clr_DoBurninModeFlag();
 836   3                      
 837   3                      ResetAllSetting();
 838   3                      
 839   3                      #if Show_BackLightTimeValue
 840   3              
 841   3                      BlacklitTime_S=0;
 842   3                      BlacklitTime_M=0;
 843   3                      BlacklitTime_H=0;
 844   3                      
 845   3                      MonitorBackLightTime_S=BlacklitTime_S;
 846   3                      MonitorBackLightTime_M=BlacklitTime_M;
 847   3                      MonitorBackLightTime_H=BlacklitTime_H;
 848   3                      
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 15  

 849   3                      SaveMonitorSetting2();
 850   3                      
 851   3                      #endif
 852   3                      PowerOffSystem();
 853   3          }
 854   2      }
 855   1      #endif
 856   1      
 857   1      
 858   1      }
 859          
 860          
 861          
 862          
 863          Bool ExecuteKeyEvent(MenuItemActionType menuAction)
 864          {
 865   1      
 866   1          Bool processEvent = TRUE;
 867   1          BYTE xdata tempValue; 
 868   1      
 869   1      
 870   1              
 871   1          while (processEvent)
 872   1          {
 873   2              processEvent = FALSE;
 874   2              switch (menuAction)
 875   2              {
 876   3                  case MIA_IncValue:
 877   3                  case MIA_DecValue:
 878   3                      if (CurrentMenuItemFunc.AdjustFunction)
 879   3                      {
 880   4                                      if((TurboKeyCounter > 0)&&!(CurrentMenuItem.DisplayValue.DrawNumber)   //071225 adjust value on
             -ce if not release key 
 881   4                                                      &&!(CurrentMenuItem.DisplayValue.DrawGuage))
 882   4                                      {       Delay1ms(100);
 883   5                                              break;
 884   5                                      }
 885   4                                              #if  HotKey_ECO_DCR
                                                      if (MenuPageIndex == HotKeyECOMenu && UserPrefECOMode==(ECO_Nums-1) && menuAction==MIA_IncValue
                                                        ||MenuPageIndex == HotKeyECOMenu && UserPrefECOMode==ECO_Standard && menuAction==MIA_DecValue)
                                                      {
                                                              UserPrefDcrMode = FALSE;
                                                              MenuPageIndex = HotKeyDCRMenu;
                                                              MenuItemIndex=0;
                                                      }
                                                      else if(MenuPageIndex == HotKeyDCRMenu && menuAction==MIA_IncValue)
                                                      {
                                                              UserPrefECOMode=(ECO_Nums-1);
                                                              MenuPageIndex=HotKeyECOMenu;
              
                                                              MenuItemIndex=0;
                                                      }
                                                      else if(MenuPageIndex == HotKeyDCRMenu && menuAction==MIA_DecValue)
                                                      {
                                                              UserPrefECOMode=ECO_Standard;
                                                              MenuPageIndex=HotKeyECOMenu;
                                                              MenuItemIndex=0;
                                                      }
                                                      #endif
 907   4                          
 908   4                          if (CurrentMenuItemFunc.AdjustFunction(menuAction))
 909   4                          {
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 16  

 910   5                           
 911   5                                  if(CurrentMenu.Flags&mpbClrGroup)
 912   5                              {   // clear status Text
 913   6                                  Osd_Set256TextColor( CPC_Background<<4|CPC_Background, Color_2);
 914   6                                  Osd_DrawContinuesChar(CurrentMenuItem.XPos+CENTER_ALIGN_STARTPOS+1, CurrentMen
             -uItem.YPos,SpaceFont,11);
 915   6                              }
 916   5                                              
 917   5                              if( MenuPageIndex == ECOMenu
 918   5                               || MenuPageIndex == DCRMenu )
 919   5                              {
 920   6                                      Osd_DrawContinuesChar(CurrentMenuItem.XPos+CENTER_ALIGN_STARTPOS+1, 0x08,SpaceFon
             -t,11);
 921   6                                                              Osd_DrawContinuesChar(CurrentMenuItem.XPos+CENTER_ALIGN_STARTPOS+1, 0x0A,SpaceFont,11);                   
 922   6                                  DrawOsdSubMenu( OSD_BriContrastMenu );
 923   6                              }
 924   5                                      #if LowBlueLightType == LowBlueLight_SharpFunc
                                      else if( MenuPageIndex == ColorTempMenu )
                                      {
                                              if(UserPrefColorTemp!=CTEMP_LowBlue)
                                                              {
                                                                  gTempLowBlueMode=LOW_BLUE_LIGHT_OFF;        
                                                                              Osd_DrawContinuesChar(CurrentMenuItem.XPos+CENTER_ALIGN_STARTPOS+1, 12,SpaceFont,11);     
                                                              }   
                                          DrawOsdSubMenu( RGBColorMenu );
                                      }
                                      else if( MenuPageIndex == LowBlueLightMenu )
                                      {                                 
                                          DrawOsdSubMenu( RGBColorMenu );
                                      }                                                       
                                                      #else   
 939   5                              else if( MenuPageIndex == ColorTempMenu 
 940   5                                  #if ( LowBlueLightType==LowBlueLight_ColorTemp) 
                                          || MenuPageIndex == LowBlueLightMenu
                                          #endif
 943   5                                                      )
 944   5                              {
 945   6                                  DrawOsdSubMenu( RGBColorMenu );
 946   6                              }
 947   5                                      #endif
 948   5                                              #if AdjustLanguageFunction
 949   5                                                      else if( MenuPageIndex == LanguageMenu )
 950   5                                                      {
 951   6                                                              for(tempValue=SUB_TEXT_YPOS;tempValue<0x0F;tempValue+=2)
 952   6                                                                      Osd_DrawContinuesChar( SUB_TEXT_XPOS , tempValue , SpaceFont , 0x27-SUB_TEXT_XPOS);
 953   6      
 954   6                                                              Osd_SetTextMonoColor(0x00, 0x06);
 955   6                                                              Osd_DrawContinuesChar( 2 , 1 , SpaceFont , 0x27);                                               
 956   6                                                      LoadLanguageStatusPropfont();
 957   6                                                              
 958   6                                                              MenuPageIndex=MainMenu;
 959   6                                                              MenuItemIndex = MAIN_Osd_ITEM;
 960   6                                                              DrawOsdMenuItemRadioGroup(MAIN_Osd_ITEM,CurrentMenuItems[MAIN_Osd_ITEM].DisplayValue.DrawRadioGroup
             -);
 961   6      
 962   6                                                              DrawOsdSubMenu( OsdMenu );
 963   6      
 964   6                                                              MenuPageIndex = LanguageMenu;
 965   6                                                              MenuItemIndex =0 ;
 966   6                                                       }
 967   5      
 968   5                                              #endif
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 17  

 969   5                                              #if FreeSyncMenu_Enable
                                                              else if(MenuPageIndex==FreeSyncMenu)
                                                              {
                                                                  processEvent = TRUE;
                                                              menuAction = MIA_Exit;
                                                              }
                                                      #endif
 976   5      
 977   5      
 978   5                              if ( MenuPageIndex == HotKeyECOMenu
 979   5                                                              #if Hotkey_DCR_Enable
                                                                      || MenuPageIndex == HotKeyDCRMenu
                                                                      #endif
 982   5                                                      #if HotExpansionAdjust
 983   5                                                      || MenuPageIndex == HotExpansionMenu  
 984   5                                                      #endif
 985   5                                                      )
 986   5                              {
 987   6                                  mStar_WaitForDataBlanking();
 988   6                                  DynamicLoadHotIconFont();
 989   6                              #if ENABLE_OVER_SCAN&& AudioFunc  
                                          if (MenuPageIndex == HotExpansionMenu)
                                          {
                                                  DrawOsdMenuItemText(MenuItemIndex, &CurrentMenuItems[MenuItemIndex]);
                                          }
                                      #endif
 995   6                                                      #if Hotkey_ECO_Text_Enable
                                          if (MenuPageIndex == HotKeyECOMenu)
                                          {
                                              //DrawOsdMenuItemText(MenuItemIndex, &CurrentMenuItems[MenuItemIndex]);
                                              Osd_DrawContinuesChar( 8 , 3 , SpaceFont , 8);
                                                                              DrawOsdMenuItemValue( MenuItemIndex, &CurrentMenuItem.DisplayValue );
                                          }
                                                              #endif
1003   6                              }
1004   5                              
1005   5                          #if AudioFunc
1006   5                                                      if((MenuPageIndex==VolumeMenu)&&(CurrentMenuItemFunc.AdjustFunction==AdjustVolume))
1007   5                                                      { 
1008   6                                                         DrawOsdSubMenu( MuteMenu );
1009   6                                                      }
1010   5                          #endif
1011   5      
1012   5                                              
1013   5                                              #if AudioFunc && ENABLE_OSD_HotKeyVolume
                                                              if(MenuPageIndex == HotKeyVolMenu)
                                                                      Osd_Set256TextColor( CP_UnselectItem, Color_2 );
                                                              else
                                                      #endif
1018   5                                              #if Hotkey_BriCon_Enable
                                                              if(MenuPageIndex == HotKeyBriMenu||MenuPageIndex == HotKeyConMenu)
                                                                      Osd_Set256TextColor( CP_UnselectItem, Color_2 );
                                                              else
                                                      #endif          
1023   5                                              #if Hotkey_Bri_Enable
                                                              if(MenuPageIndex == HotKeyBriMenu)
                                                                      Osd_Set256TextColor( CP_UnselectItem, Color_2 );
                                                              else
                                                      #endif          
1028   5                                              #if Hotkey_Con_Enable
                                                              if(MenuPageIndex == HotKeyConMenu)
                                                                      Osd_Set256TextColor( CP_UnselectItem, Color_2 );
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 18  

                                                              else
                                                      #endif                             
1033   5                                              if(MenuPageIndex == FactoryMenu)
1034   5                                                      Osd_SetTextMonoColor(CP_RedColor, CP_BlueColor);
1035   5                                              else
1036   5                                                      Osd_Set256TextColor( CP_SelectItem, Color_2 );
1037   5                                 
1038   5                                              DrawOsdMenuItemText(MenuItemIndex, &CurrentMenuItems[MenuItemIndex]);
1039   5                          DrawOsdMenuItemValue( MenuItemIndex, &CurrentMenuItem.DisplayValue );
1040   5      
1041   5                              Set_SaveSettingFlag();
1042   5      
1043   5                              if (TurboKeyCounter < 7)
1044   5                                  {
1045   6                                      Delay1ms(200);
1046   6                                  }
1047   5      
1048   5                          }
1049   4                      }
1050   3                      break;
1051   3      
1052   3                  case MIA_NextItem:
1053   3                  case MIA_PrevItem:
1054   3                      PrevMenuItemIndex=MenuItemIndex;
1055   3                      tempValue = MenuItemIndex;
1056   3      
1057   3                      if (menuAction == MIA_NextItem)
1058   3                                      {
1059   4                          MenuItemIndex = GetNextItem(CurrentMenuItems);
1060   4                      }
1061   3                      else if(menuAction == MIA_PrevItem)
1062   3                      {       
1063   4                          MenuItemIndex = GetPrevItem(CurrentMenuItems);
1064   4                      }
1065   3      #if DEBUG_PRINTDATA                             
                 printData("MenuItem Index %d",MenuItemIndex);
              #endif
1068   3      
1069   3                      if (tempValue != MenuItemIndex)
1070   3                      {
1071   4                      #if 1
1072   4                          BYTE xdata TempIndex=0;     //111223 Modify
1073   4                      #endif
1074   4                                              
1075   4                          if( MenuPageIndex == MainMenu )
1076   4                          {
1077   5                              Osd_SetTextMonoColor(0x00, 0x06);
1078   5                                                      Osd_DrawContinuesChar( 6 , 1 , SpaceFont , 0x20);
1079   5                              Osd_SetTextMonoColor(0x00, 0x07);
1080   5                                                      for(tempValue=SUB_TEXT_YPOS;tempValue<0x0F;tempValue+=2)
1081   5                                                      {
1082   6                                                              Osd_DrawContinuesChar( SUB_TEXT_XPOS , tempValue , SpaceFont , 0x27-SUB_TEXT_XPOS);
1083   6                                                      }
1084   5                                                      tempValue = PrevMenuItemIndex;
1085   5                          }
1086   4                      #if Hot_Corss_FY_ColorSelect 
                                                      if(MenuPageIndex == HotCorssMenu)
                                                      {
                                                              Osd_Hide();
                                                              Delay1ms(100);
                                                              DynamicLoadHotCorssIcon(MenuItemIndex/2);
                                                      }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 19  

                                              #elif Hot_Corss_FND_Select
                                                      if(MenuPageIndex == HotCorssMenu)
                                                      {
                                                              Osd_Hide();
                                                              Delay1ms(100);
                                                              DynamicLoadHotCorssIcon(MenuItemIndex);
                                                      }                       
                                              #endif          
1101   4                          if (CurrentMenuItem.Fonts)
1102   4                          {
1103   5                              DynamicLoadFont(CurrentMenuItem.Fonts);
1104   5                          }
1105   4                      
1106   4                                                                                      
1107   4                      #if WaitForDataBlanking  
1108   4                          mStar_WaitForDataBlanking();
1109   4                                      #endif                  
1110   4                          DrawOsdMenuItem(tempValue, &CurrentMenuItems[tempValue]);
1111   4                                      #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)    
1112   4                          if (MenuPageIndex == InputSelectMenu)
1113   4                          {   // clear status Text
1114   5                              Osd_Set256TextColor( CPC_Background<<4|CPC_Background, Color_2);
1115   5                              Osd_DrawContinuesChar( CurrentMenuItem.XPos+CENTER_ALIGN_STARTPOS+1, CurrentMenuIt
             -em.YPos, MonoSpace , 11);
1116   5                          }
1117   4                                      #endif          
1118   4                          DrawOsdMenuItem(MenuItemIndex, &CurrentMenuItem);
1119   4                          if( MenuPageIndex == MainMenu )
1120   4                          {
1121   5                              DrawOsdSubMenu( NextMenuPage );
1122   5                                              
1123   5                                              if( MenuItemIndex == MAIN_Misc_ITEM)
1124   5                                                      DrawTimingInfo();                                                                                                       
1125   5                          }
1126   4                      #if Hot_Corss_FY_ColorSelect || Hot_Corss_FND_Select
                                                      if(MenuPageIndex == HotCorssMenu)
                                                      {
                                                              Osd_Show();
                                                      }
                                              #endif          
1132   4      
1133   4                          if (MenuPageIndex == FactoryMenu)
1134   4                              {
1135   5      
1136   5                                  if ((MenuItemIndex == Item_9300R && tempValue < Item_Rever) || (MenuItemIndex == Item
             -_9300B && tempValue > Item_adj9300B))
1137   5                                  {
1138   6                                      SetFactoryColorTempCool1();
1139   6                                  }
1140   5      
1141   5                                  else if ((MenuItemIndex == Item_6500R && tempValue < Item_6500R) || (MenuItemIndex ==
             - Item_6500B && tempValue > Item_adj6500B))
1142   5                                  {
1143   6                                      SetFactoryColorTempWarm1();
1144   6                                  }
1145   5                                              #if CT_7500K_ENABLE                     
                                          else if ((MenuItemIndex == Item_7500R && tempValue < Item_7500R) || (MenuItemIndex ==
             - Item_7500B && tempValue > Item_adj7500B))
                                          {
                                              SetFactoryColorTempNormal();
                                          }
                                                      #endif                                                          
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 20  

1151   5                                              #if CT_sRGB_ENABLE                      
                                          else if ((MenuItemIndex == 31 && tempValue < 31) || (MenuItemIndex == 35 && tempValue
             - > 36))
                                          {
                                              SetFactoryColorTempSRGB();
                                          }
                                                      #endif  
1157   5      
1158   5                              #if 1 //2006-08-03 Andy Due To Color Setting Not Complete
1159   5                                  if (SaveSettingFlag)
1160   5                                  {
1161   6                                      //121108 Modify
1162   6                                                              SaveFactorySetting();//UserPref_EnableFlashSaveBit(bFlashSaveFactoryBit); 
1163   6                                                              if ((tempValue >= 53+Enable_ProductModeAdjust*2+ENABLE_FACTORY_SSCADJ*5+(PanelminiLVDS || PANEL_VCO
             -M_ADJUST)*2)&&//Burn In Flag  //120830 Modify
1164   6                                                                      (tempValue <= 58+Enable_ProductModeAdjust*2+0*4+ENABLE_FACTORY_SSCADJ*5+(PanelminiLVDS || PANEL_VC
             -OM_ADJUST)*2)//Addr   //120830 Modify
1165   6                                                                      )
1166   6                                                                      SaveMonitorSetting();//UserPref_EnableFlashSaveBit(bFlashSaveMonitorBit); 
1167   6                                                              Clr_SaveSettingFlag();
1168   6                                  }
1169   5                              #endif
1170   5                              }
1171   4      
1172   4      
1173   4                          Delay1ms(200);
1174   4      
1175   4                      }
1176   3                      break;
1177   3                                      
1178   3                  case MIA_JumpAdjustItem:
1179   3                  case MIA_JumpNaviItem:
1180   3                      tempValue = MenuItemIndex;
1181   3                      MenuItemIndex += ((menuAction == MIA_JumpAdjustItem) ? (1): ( - 1));
1182   3      
1183   3                      #if 1
1184   3                                              if (MenuPageIndex == FactoryMenu)
1185   3                                              // for factory mode
1186   3                                              {                 
1187   4                              if ((MenuItemIndex == Item_9300R && tempValue < Item_9300R) || (MenuItemIndex == Item
             -_9300B && tempValue > Item_adj9300B))
1188   4                              {
1189   5                                  SetFactoryColorTempCool1();
1190   5                              }
1191   4                      
1192   4                              else if ((MenuItemIndex == Item_6500R && tempValue < Item_6500R) || (MenuItemIndex
             - == Item_6500B && tempValue > Item_adj6500B))
1193   4                              {
1194   5                                  SetFactoryColorTempWarm1();
1195   5                              }
1196   4                                              #if CT_7500K_ENABLE                     
                                      else if ((MenuItemIndex == Item_7500R && tempValue < Item_7500R) || (MenuItemIndex
             - == Item_7500B && tempValue > Item_adj7500B))
                                      {
                                          SetFactoryColorTempNormal();
                                      }
                                                      #endif                                                          
1202   4                                              #if CT_sRGB_ENABLE                      
                                      else if ((MenuItemIndex == 31 && tempValue < 31) || (MenuItemIndex == 35 && tempVa
             -lue > 36))
                                      {
                                          SetFactoryColorTempSRGB();
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 21  

                                      }
                                                      #endif  
1208   4      
1209   4      
1210   4                                      #if 1 //2006-08-03 Andy Due To Color Setting Not Complete
1211   4                                                      if (SaveSettingFlag)
1212   4                                                      {
1213   5                                                              //121108 Modify
1214   5                                                              SaveFactorySetting();//UserPref_EnableFlashSaveBit(bFlashSaveFactoryBit); 
1215   5                                                              if ((tempValue >= 53+Enable_ProductModeAdjust*2+ENABLE_FACTORY_SSCADJ*5+(PanelminiLVDS || PANEL_VCO
             -M_ADJUST)*2)&&//Burn In Flag  //120830 Modify
1216   5                                                                      (tempValue <= 58+Enable_ProductModeAdjust*2+0*4+ENABLE_FACTORY_SSCADJ*5+(PanelminiLVDS || PANEL_VC
             -OM_ADJUST)*2)//Addr   //120830 Modify
1217   5                                                                      )
1218   5                                                                      SaveMonitorSetting();//UserPref_EnableFlashSaveBit(bFlashSaveMonitorBit); 
1219   5                                                              Clr_SaveSettingFlag();
1220   5                                                      }
1221   4                                      #endif
1222   4                                              }
1223   3                              #endif
1224   3                      //printData("MenuItem Index %d",MenuItemIndex);
1225   3                      DrawOsdMenuItem(tempValue, &CurrentMenuItems[tempValue]);
1226   3                      DrawOsdMenuItem(MenuItemIndex, &CurrentMenuItem);
1227   3                      Delay1ms(200);
1228   3                      break;
1229   3      
1230   3                              case MIA_GotoNext:
1231   3                              case MIA_GotoPrev:
1232   3                                      PrevMenuItemIndex = MenuItemIndex;
1233   3                                      PrevPage = MenuPageIndex;
1234   3      
1235   3                      UserPrefInputType=SrcInputType;//For OSD Input Type Display Error When Time out            
             -Zhifeng.Wu 20071128
1236   3                          
1237   3                                      MenuPageIndex = (menuAction == MIA_GotoNext) ? (NextMenuPage): (PrevMenuPage);
1238   3                                      #if PresetMode_Enable && Enable_Gamma
                                                      if(UserPrefECOMode == ECO_Preset && MenuPageIndex==DCRMenu ) 
                                                              MenuPageIndex=GammaMenu;
                                              #endif                           
1242   3      
1243   3                                                              
1244   3                      if ((PrevPage == RootMenu && MenuPageIndex == MainMenu))
1245   3                      {
1246   4                      #if Enable_DDCCI_OSDEnable_EN
                                                      if(DDCOSDDisEnableFlag)
                                                      {
                                                              MenuPageIndex = RootMenu;
                                                              break;
                                                      }
                                              #endif
1253   4                                
1254   4                          if( FactoryModeFlag )// while enter factory, then stay in Lum.
1255   4                              {
1256   5                              #if HowShowFMenu
                                                              MenuPageIndex=FactoryMenu;
                                                              MenuItemIndex = 0;
                                                      #else
1260   5                              MenuItemIndex = MAIN_MAX_ITEM;
1261   5                                              #endif
1262   5                              }
1263   4                          else
1264   4                              MenuItemIndex = 0;   
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 22  

1265   4                      }
1266   3                                      #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)    
1267   3                                              else if (PrevPage == InputSelectMenu&&MenuPageIndex==OSD_MiscMenu)
1268   3                                  {   
1269   4                                      // clear status Text
1270   4                                      Osd_Set256TextColor( CPC_Background<<4|CPC_Background, Color_2);
1271   4                                      Osd_DrawContinuesChar( 0x19,0x04, MonoSpace , 10);
1272   4                                                      MenuItemIndex = GetMenuItemIndex(PrevPage);             
1273   4                                  }   
1274   3                                      #endif
1275   3                      else
1276   3                      {
1277   4                              MenuItemIndex = GetMenuItemIndex(PrevPage);
1278   4                      }
1279   3      
1280   3                      if( menuAction == MIA_GotoPrev && BackToUnsupportFlag&& UnsupportedModeFlag )//20130517 ad
             -d
1281   3                      {
1282   4                                              MenuPageIndex = UnsupportedModeMenu;
1283   4                                              moveX=50;       //111223 Modify
1284   4                                              moveY=50;       //111223 Modify
1285   4                                              Osd_Hide();     //111223 Modify
1286   4                                              Clr_BackToUnsupportFlag();
1287   4                                              Clr_BackToStandbyFlag();
1288   4                      }
1289   3                      else if( menuAction == MIA_GotoPrev && BackToStandbyFlag )
1290   3                      {
1291   4                                      #if DEBUG_HOTSWITCH
                                                      printMsg("menuAction == MIA_GotoPrev && BackToStandbyFlag");
                                              #endif
1294   4                                              MenuPageIndex = StandbyMenu;
1295   4                                              Osd_Hide();     //111223 Modify
1296   4                                              Clr_BackToStandbyFlag();
1297   4                      }
1298   3      
1299   3                      Clr_PressExitFlag();
1300   3                      Clr_EnableShowDDCFlag();
1301   3                      Clr_PressMenuFlag();
1302   3                      Clr_MuteFlag();
1303   3                                      
1304   3                                      #if 0
                              Clr_PressMinusFlag();
                                              #endif
1307   3                                      
1308   3                                      #if ENABLE_OVER_SCAN && AudioFunc       //121211 Modify
                                      Clr_PressPlusFlag();
                                      Clr_EnableExpansionMenuFlag();
                                              #endif
1312   3          
1313   3                  case MIA_RedrawMenu:
1314   3                              #if ENABLE_DEBUG
                                      printData("MenuPageIndex==AA===>>>>%d", MenuPageIndex);
                                      printData("FactoryMenu==AA===>>>>%d", FactoryMenu);
                                              #endif
1318   3      
1319   3                      #if DDCCI_ENABLE && DDCCCIMenu_Enable
                                  if (MenuPageIndex == DdcciInfoMenu)
                                      CurrentMenu.ExecFunction();
                              #endif
1323   3      
1324   3                      DrawOsdMenu();          
1325   3                                      
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 23  

1326   3                      if( MenuPageIndex == MainMenu )
1327   3                          DrawOsdSubMenu( NextMenuPage );
1328   3      
1329   3                      #if DDCCI_ENABLE && DDCCCIMenu_Enable
                                  if (MenuPageIndex == DdcciInfoMenu)
                                      Delay1ms(200);
                                  //Benz 2007.4.24   21:45:31  so bad solution but no time cover it
                              #endif
1334   3      
1335   3                      #if DDCCI_ENABLE && DDCCCIMenu_Enable
                                  if (CurrentMenu.ExecFunction && MenuPageIndex != DdcciInfoMenu)
                              #else
1338   3                          if (CurrentMenu.ExecFunction)
1339   3                      #endif
1340   3                          {
1341   4                              tempValue = CurrentMenu.ExecFunction();
1342   4                                      #if AboutDSUBFunc_Enable                        
1343   4                              if (CurrentMenu.ExecFunction == AutoColor && MenuPageIndex == FactoryMenu)
1344   4                              {
1345   5                                  Osd_SetTextColor(0, 6);
1346   5                                  if (tempValue)
1347   5                                  {
1348   6                                      Osd_DrawRealStr_F(10, 3, PassText());
1349   6                                  }
1350   5                                  else
1351   5                                  {
1352   6                                      Osd_DrawRealStr_F(10, 3, FailText());
1353   6                                  }
1354   5                                  Delay1ms(200);
1355   5                              }
1356   4                                              #endif          
1357   4                          }
1358   3                              
1359   3                          if (!(CurrentMenu.Flags &mpbStay))
1360   3                          {
1361   4                              processEvent = TRUE;
1362   4                              menuAction = MIA_GotoPrev;
1363   4                          }                           
1364   3                          if (SaveSettingFlag)
1365   3                          {
1366   4                              SaveUserPrefSetting(PrevPage);
1367   4                          }
1368   3                      
1369   3                      break;
1370   3                                      
1371   3                  case MIA_ExecFunc:
1372   3                                      
1373   3                      if (CurrentMenuItemFunc.ExecFunction)
1374   3                      {
1375   4                          if (CurrentMenuItemFunc.ExecFunction == AutoColor)
1376   4                          {
1377   5                              Osd_SetTextColor(CP_WhiteColor, CP_BlueColor);
1378   5                          }
1379   4                                              else if(CurrentMenuItemFunc.ExecFunction == ResetAllSetting)
1380   4                                      {
1381   5                                                      Osd_Hide();
1382   5                                              }
1383   4                      
1384   4      
1385   4                          processEvent = CurrentMenuItemFunc.ExecFunction();
1386   4      
1387   4                                      #if AboutDSUBFunc_Enable                
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 24  

1388   4                          if (CurrentMenuItemFunc.ExecFunction == AutoColor && MenuPageIndex == FactoryMenu)
1389   4                          {
1390   5                              Osd_SetTextMonoColor(/*CP_RedColor*/0x0F, CP_BlueColor);
1391   5                              if (processEvent)
1392   5                              {
1393   6                                  Osd_DrawRealStr_F(12, 2, PassText());
1394   6                              }
1395   5                              else
1396   5                              {
1397   6                                  Osd_DrawRealStr_F(12, 2, FailText());
1398   6                              }
1399   5                              #if 1 //2006-08-03 Andy
1400   5                                  DrawOsdMenuItemNumber(0, DrawGainRNumber);
1401   5                                  DrawOsdMenuItemNumber(0, DrawGainGNumber);
1402   5                                  DrawOsdMenuItemNumber(0, DrawGainBNumber);
1403   5                                              #ifdef TSUMXXT          //110316 Modify
                                                                      Osd_SetTextMonoColor(CP_GrayColor, CP_BlueColor);
                                                              #endif
1406   5                                  DrawOsdMenuItemNumber(0, DrawOffsetRNumber);
1407   5                                  DrawOsdMenuItemNumber(0, DrawOffsetGNumber);
1408   5                                  DrawOsdMenuItemNumber(0, DrawOffsetBNumber);
1409   5                              #endif
1410   5                          }
1411   4                                      #endif          
1412   4                                      #if !AdjustLanguageFunction                             
                                              else if(CurrentMenuItemFunc.ExecFunction == AdjustLanguage && MenuPageIndex==LanguageMenu)
                                              {
                                                              for(tempValue=SUB_TEXT_YPOS;tempValue<0x0F;tempValue+=2)
                                                              Osd_DrawContinuesChar( SUB_TEXT_XPOS , tempValue , SpaceFont , 0x27-SUB_TEXT_XPOS);
                                                      
                                                      LoadLanguageStatusPropfont();
                                                              
                                                              MenuPageIndex=MainMenu;
                                                              Osd_SetTextMonoColor(0x00, 0x06);
                                                              Osd_DrawContinuesChar( 2 , 1 , SpaceFont , 0x27);
                                                              MenuItemIndex = MAIN_Osd_ITEM;
                                                              DrawOsdMenuItemRadioGroup(MAIN_Osd_ITEM,CurrentMenuItems[MAIN_Osd_ITEM].DisplayValue.DrawRadioGroup)
             -;
              
                                                              MenuPageIndex=OsdMenu;
                                                              MenuItemIndex=GetMenuItemIndex(MenuPageIndex);
                                                              menuAction=MIA_RedrawMenu;
                                                              processEvent=TRUE;
                                                              break;
                                                      }
                                              #endif           
1433   4                                              else if(CurrentMenuItemFunc.ExecFunction == ResetAllSetting)
1434   4                                      {
1435   5                                                      if(UserPrefLanguage != DefLanguage)
1436   5                                                      {
1437   6                                                              UserPrefLanguage =DefLanguage;
1438   6                                                      #if 1
1439   6                                                              LoadLanguageStatusPropfont();
1440   6                                                      #else   
                                                                      for(tempValue=SUB_TEXT_YPOS;tempValue<0x0F;tempValue+=2)
                                                                              Osd_DrawContinuesChar( SUB_TEXT_XPOS , tempValue , SpaceFont , 0x27-SUB_TEXT_XPOS);
                                                              LoadLanguageStatusPropfont();
                                                                      MenuPageIndex=MainMenu;
                                                                      Osd_SetTextMonoColor(0x00, 0x06);
                                                                      Osd_DrawContinuesChar( 2 , 1 , SpaceFont , 0x27);
                                                                      MenuItemIndex = MAIN_Setting_ITEM;
                                                                      DrawOsdMenuItemRadioGroup(MAIN_Setting_ITEM,CurrentMenuItems[MAIN_Setting_ITEM].DisplayValue.DrawRa
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 25  

             -dioGroup);
              
                                                                      DrawOsdSubMenu(SettingMenu);
              
                                                                      MenuPageIndex=SettingMenu;
                                                                      MenuItemIndex=Setting_RESTR_ITEM;
                                                                      DrawOsdMenuItem(MenuItemIndex, &CurrentMenuItem);
                                                              #endif  
1456   6                                                      }
1457   5                                                      if(SrcInputType < Input_Digital)
1458   5                                                              MenuPageIndex=AutoMenu;
1459   5                                                      else
1460   5                                                              MenuPageIndex=RootMenu;
1461   5                                                      MenuItemIndex=0;
1462   5                                                      menuAction=MIA_RedrawMenu;
1463   5                                                      processEvent=TRUE;
1464   5                                                      break;  
1465   5                                      }
1466   4               
1467   4                                                                              
1468   4                                      #if (!USEFLASH) // 130829 larry
                                                      if (CurrentMenuItemFunc.ExecFunction == EraseAllEEPROMCell)
                                                      { 
                                                              if (processEvent)
                                                              {                                                
                                                                      Osd_SetTextMonoColor(CP_RedColor, CP_BlueColor);
                                                                      Osd_DrawRealStr_F(15, 30, PassText());
                                                              }
                                                              else
                                                              {                                                
                                                                      Osd_SetTextMonoColor(CP_GrayColor, CP_BlueColor);
                                                                      Osd_DrawRealStr_F(15, 30, FailText());
                                                              }
                                                      }
                                              #endif
1483   4      
1484   4                      #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)    
1485   4                              if(( MenuPageIndex == InputSelectMenu
1486   4                      #if HotInputSelect
1487   4                              || MenuPageIndex == HotInputSelectMenu
1488   4                      #endif
1489   4                      ) && processEvent == FALSE )
1490   4                      {
1491   5                          menuAction = MIA_GotoPrev;
1492   5                          MenuItemIndex = 0;
1493   5                          processEvent = TRUE;
1494   5                      }
1495   4                                      else
1496   4                      #endif
1497   4                      #if HotInputSelect
1498   4                          if ((MenuPageIndex == InputSelectMenu||MenuPageIndex == HotInputSelectMenu)&& processE
             -vent == TRUE) //20151103 alpha for MHL
1499   4                          {
1500   5                              MenuPageIndex = RootMenu;
1501   5                              MenuItemIndex = 0;
1502   5                              processEvent = FALSE;
1503   5                          }
1504   4                          else
1505   4                      #endif
1506   4                              processEvent = FALSE;   //110424 Modify
1507   4                       
1508   4                      }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 26  

1509   3                      break;
1510   3                      
1511   3                  case MIA_Exit:                      
1512   3                      if (SaveSettingFlag)
1513   3                      {
1514   4                          Clr_SaveSettingFlag();
1515   4                          SaveUserPref();
1516   4                      }
1517   3      
1518   3                              menuAction = MIA_RedrawMenu;
1519   3                              PrevPage = MenuPageIndex; //WMZ 050816
1520   3                              MenuPageIndex = RootMenu;
1521   3                              MenuItemIndex = 0;
1522   3                              processEvent = TRUE;
1523   3      
1524   3                      Clr_PressExitFlag();
1525   3                      Clr_EnableShowDDCFlag();
1526   3                      Clr_PressMenuFlag();
1527   3                      Clr_MuteFlag();
1528   3      
1529   3                                      #if ENABLE_OVER_SCAN && AudioFunc       //121211 Modify
                                      Clr_PressPlusFlag();
                                      Clr_EnableExpansionMenuFlag();
                                              #endif
1533   3                      break;
1534   3                                      
1535   3                      #if Hotkey_ECO_Enable           
                          case MIA_ECO:
                              if (FreeRunModeFlag||UnsupportedModeFlag)
                              {
                                  break;
                              }
                                #if  !HotKey_ECO_DCR          
                              if (UserPrefDcrMode)
                              {
                                  break;
                              }
                                #endif
                              
                              mStar_WaitForDataBlanking();
                              Osd_Hide();
                                              #if CT_sRGB_ENABLE
                              if( UserPrefColorTemp == CTEMP_SRGB)    //120204 Modify
                                  UserPrefECOMode = ECO_Standard;
                                               #endif
                              menuAction = MIA_RedrawMenu;
              
                                              #if  HotKey_ECO_DCR
                                               if(UserPrefDcrMode)
                                              {
                                                      MenuPageIndex = HotKeyDCRMenu;
                                              }       
                                              else
                                              #endif  
                                              {
                                  MenuPageIndex = HotKeyECOMenu;
                                              }
                              MenuItemIndex = 0;
                              processEvent = TRUE;
                              KeypadButton = BTN_Repeat; // 071218 addition to prevent hot key event execute twince
                              break;
                              #endif
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 27  

1571   3                                      
1572   3                     #if AudioFunc &&  ENABLE_OSD_HotKeyVolume
                                   case MIA_VOL:
                                     if (FreeRunModeFlag||UnsupportedModeFlag||(SrcInputType == Input_VGA))
                                     {
                                         break;
                                     }
                                      
                                     Osd_Hide();
                                     menuAction = MIA_RedrawMenu;
                
                                              MenuPageIndex=HotKeyVolMenu;
                                     MenuItemIndex = 0;
                                     processEvent = TRUE;
                                     KeypadButton = BTN_Repeat; // 071218 addition to prevent hot key event execute twin
             -ce
                                 break;
              
                             #endif
1589   3      
1590   3                     #if Hotkey_BriCon_Enable            
                                case MIA_Brite:                  
                               case MIA_Cont:
                                               #if CT_sRGB_ENABLE
                               if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard || UserPrefColorTemp == CTEMP_SRGB||U
             -serPrefDcrMode||UnsupportedModeFlag)
                               #else
                                                if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard ||UserPrefDcrMode||UnsupportedModeFlag)
                                               #endif
                                               {
                                   break;
                               }
                   
                               menuAction = MIA_RedrawMenu;
                               MenuPageIndex = HotKeyBriMenu;
                               MenuItemIndex = 0;
                               processEvent = TRUE;
                                 KeypadButton = BTN_Repeat;            
                               break;                 
                             #endif
1609   3                     #if Hotkey_Bri_Enable               
                                case MIA_Brite:                  
                                               #if CT_sRGB_ENABLE
                               if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard || UserPrefColorTemp == CTEMP_SRGB||U
             -serPrefDcrMode||UnsupportedModeFlag)
                               #else
                                                if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard ||UserPrefDcrMode||UnsupportedModeFlag)
                                               #endif
                                               {
                                   break;
                               }
                   
                               menuAction = MIA_RedrawMenu;
                               MenuPageIndex = HotKeyBriMenu;
                               MenuItemIndex = 0;
                               processEvent = TRUE;
                                 KeypadButton = BTN_Repeat;            
                               break;                 
                             #endif
1627   3                     #if Hotkey_Con_Enable                       
                               case MIA_Cont:
                                               #if CT_sRGB_ENABLE
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 28  

                               if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard || UserPrefColorTemp == CTEMP_SRGB||U
             -serPrefDcrMode||UnsupportedModeFlag)
                               #else
                                                if (FreeRunModeFlag|| UserPrefECOMode!=ECO_Standard ||UserPrefDcrMode||UnsupportedModeFlag)
                                               #endif
                                               {
                                   break;
                               }
                   
                               menuAction = MIA_RedrawMenu;
                               MenuPageIndex = HotKeyBriMenu;
                               MenuItemIndex = 0;
                               processEvent = TRUE;
                                 KeypadButton = BTN_Repeat;            
                               break;                 
                             #endif
1645   3                      
1646   3                      #if Hot_Corss_ColorSelect||Hot_Corss_FY_ColorSelect || Hot_Corss_FND_Select
                              case MIA_HotCorssMenu:
                                              DynamicLoadHotCorssIcon(0);
                                              MenuPageIndex=HotCorssMenu;
                                              MenuItemIndex=0; 
                                              KeypadButton=BTN_Repeat;
                                              menuAction=MIA_RedrawMenu;  
                                              processEvent=TRUE;
                                              break; 
                              #endif
1656   3      
1657   3                                 
1658   3                      #if DDCCI_ENABLE && DDCCCIMenu_Enable&&0
                              case MIA_DDC:
                                  if (FreeRunModeFlag )
                                  {
                                      break;
                                  }
                                  menuAction = MIA_RedrawMenu;
                                  MenuPageIndex = DdcciInfoMenu;
                                  DynamicLoadFont(CurrentMenu.Fonts);
                                  MenuItemIndex = 0;
                                  processEvent = TRUE;
                                  Clr_PressExitFlag();
                                  Clr_EnableShowDDCFlag();
                                                      #if 0
                                                      Clr_PressMinusFlag();
              
                                                      #endif
                                                      #if ENABLE_OVER_SCAN && AudioFunc       //121211 Modify
                                                      Clr_PressPlusFlag();
                                                      Clr_EnableExpansionMenuFlag();
                                                      #endif
                                  break;
                              #endif
1681   3                  case MIA_Auto:
1682   3                              
1683   3                  #if CHIP_ID>=CHIP_TSUMC
1684   3                      if (FreeRunModeFlag || SrcInputType == Input_Digital || SrcInputType == Input_Digital2 || 
             -SrcInputType == Input_Displayport|| SrcInputType == Input_Displayport3 )   //121128 Modify
1685   3                  #else                            
                              if (FreeRunModeFlag || SrcInputType == Input_Digital || SrcInputType == Input_Digital2 || 
             -SrcInputType == Input_Displayport )   //121128 Modify
                          #endif
1688   3                      {
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 29  

1689   4                          Clr_PressMenuFlag();
1690   4                          Clr_PressExitFlag();
1691   4                          break;
1692   4                      }
1693   3      
1694   3                              #ifdef DCRClearBacklight//When user press eco hotkey,turn on backlight.
1695   3                                      if(!BackLightActiveFlag)
1696   3                                              hw_SetBlacklit();
1697   3                              #endif
1698   3      
1699   3                      TurboKeyCounter = 0;
1700   3                      // printMsg( "draw auto menu" );
1701   3                      Set_DoAutoConfigFlag(); // 2007/9/14  by KK for match osd
1702   3                      menuAction = MIA_RedrawMenu;
1703   3                              MenuPageIndex = AutoMenu;
1704   3                                      
1705   3                      MenuItemIndex = 0;
1706   3                      processEvent = TRUE;
1707   3                      break;
1708   3                      //2006-02-22
1709   3      #if HotInputSelect
1710   3                              case MIA_ShowHotInput:
1711   3                                      if (!PowerOnFlag)
1712   3                                              break;
1713   3                              
1714   3                                      mStar_PowerUp();
1715   3                                      mStar_SetupFreeRunMode();
1716   3                                      //SwitchPortCntr = 0;
1717   3                                      #if AudioFunc   //120502 Modify
1718   3                                      hw_ClrAudio_SD();
1719   3                                      #endif
1720   3                                      Power_TurnOnGreenLed();
1721   3                                      if( MenuPageIndex == StandbyMenu )      //111223 Modify
1722   3                                  {
1723   4                                              Set_BackToStandbyFlag();
1724   4                          #if DEBUG_HOTSWITCH
                                      printMsg("Set_BackToStandbyFlag");
                                  #endif
1727   4                                  }
1728   3                                      if (PowerDownCounter)
1729   3                                      {
1730   4                                      PowerDownCounter=0;
1731   4                                      }
1732   3      
1733   3                                      {
1734   4                                              MenuPageIndex=HotInputSelectMenu;
1735   4                                              if(UserPrefInputSelectType==INPUT_PRIORITY_AUTO)
1736   4                                                      MenuItemIndex=SrcInputType;
1737   4                                              else    
1738   4                                                      MenuItemIndex=UserPrefInputSelectType;  
1739   4                                      }
1740   3                                      PrevPage=RootMenu;
1741   3                                      Osd_Hide();
1742   3                                      menuAction=MIA_RedrawMenu;
1743   3                                      processEvent=TRUE;                      
1744   3                                      break;  
1745   3      
1746   3      #endif
1747   3      
1748   3      
1749   3      #if HotInputSelect
1750   3                  case MIA_SourceSel:
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 30  

1751   3                      if ((!PowerOnFlag) )//|| (PowerSavingFlag))
1752   3                      {
1753   4                          break;
1754   4                      }                               
1755   3      
1756   3      
1757   3      
1758   3                          if(CheckSourceKeyStatus())
1759   3                          break;
1760   3      
1761   3                                      
1762   3                      if( MenuPageIndex == UnsupportedModeMenu)       //111223 Modify
1763   3                      {
1764   4                          Set_BackToUnsupportFlag();
1765   4                      }
1766   3                                Osd_Hide();///20130503 avoid Unsupport mode OSD garbage
1767   3                      //mStar_WaitForDataBlanking();
1768   3                      //ForceDelay1ms(10);  //avoid Unsupport mode OSD garbage  20130416
1769   3               #if MS_PM
1770   3                       #if ENABLE_AutoDetech
                              if( PowerSavingFlag )
                              {
                                  Osd_Hide();
                                  //Power_PowerOnSystem();
                                  Clr_InputTimingChangeFlag();
                                      Set_BackToStandbyFlag();        //120521 Modify
                                  mStar_SetupFreeRunMode();
                                  mStar_AdjustBrightness( 0xFF );
                                      Power_TurnOnGreenLed(); //120523 Modify
                                                      #if AudioFunc   //121128 Modify
                                                      hw_ClrAudio_SD();               
                                                      #endif
                               }
                                 #endif               
1785   3              #endif
1786   3              
1787   3                              //printMsg("MIA_SourceSel");
1788   3                      menuAction = MIA_RedrawMenu;
1789   3                      {
1790   4      
1791   4                      {
1792   5                      MenuPageIndex = HotInputSelectMenu;
1793   5                                      #if 1   //120521 Modify for TPV Request
1794   5                      MenuItemIndex = UserPrefInputType;
1795   5                                      #else
                              MenuItemIndex = SrcInputType;
                                              #endif
1798   5                        }
1799   4                      }
1800   3                      processEvent = TRUE;
1801   3                      Clr_PressExitFlag();
1802   3      
1803   3                      break;
1804   3      #endif
1805   3      #if  Hotkey_DCR_Enable
                          case MIA_DCR:
                                  if (FreeRunModeFlag ||UnsupportedModeFlag)
                                  {
                                      break;
                                  }
                                #if CT_sRGB_ENABLE
                                if (UserPrefColorTemp == CTEMP_SRGB)
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 31  

                                UserPrefColorTemp = CTEMP_Warm1;
                                #endif
                              #if UnifyHotDcrEco
                                              UserPrefDcrMode=0;
                                              AdjustDcrMode(0);
                      #endif
                              MenuPageIndex = HotKeyDCRMenu;
                              MenuItemIndex = 0;
                              menuAction = MIA_RedrawMenu;
                              processEvent = TRUE;
                              break;
              #endif                  
1825   3                              #if HotExpansionAdjust  
1826   3                              case MIA_Expansion:
1827   3                                  if (FreeRunModeFlag ||UnsupportedModeFlag)
1828   3                                  {
1829   4                                              #if ENABLE_OVER_SCAN && AudioFunc       //121211 Modify
                                                      Clr_PressPlusFlag();
                                                      Clr_EnableExpansionMenuFlag();
                                                      #endif
1833   4                              break;
1834   4                             }
1835   3                      mStar_WaitForDataBlanking();
1836   3                      Osd_Hide();
1837   3      
1838   3                         MenuPageIndex = HotExpansionMenu;
1839   3                      MenuItemIndex = 0;
1840   3                      menuAction = MIA_RedrawMenu;
1841   3                      processEvent = TRUE;
1842   3                         KeypadButton = BTN_Repeat;
1843   3                         break;
1844   3                         #endif       
1845   3                                      
1846   3                  case MIA_Power:
1847   3      
1848   3                                      if (MenuPageIndex == OSD_MiscMenu && MenuItemIndex == 0 )
1849   3                                      {
1850   4                                              Clr_SaveSettingFlag();
1851   4                                              ReadMonitorSetting();           
1852   4                                      }
1853   3                      if (PowerOnFlag)
1854   3                      {
1855   4                            MenuPageIndex = PowerOffMenu;
1856   4                      }
1857   3                      else
1858   3                      {
1859   4                          MenuPageIndex = PowerOnMenu;
1860   4                      }
1861   3      
1862   3                      MenuItemIndex = 0;
1863   3                      menuAction = MIA_RedrawMenu;
1864   3                      processEvent = TRUE;
1865   3                      KeypadButton = BTN_Repeat; // 090517 coding
1866   3                      break;
1867   3      
1868   3                  default:
1869   3                      return FALSE;
1870   3                      break;
1871   3              }
1872   2          }
1873   1          return TRUE;
1874   1      }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 32  

1875          //=========================================================================
1876          
1877          #if 0
              #if 0
              #if CHIP_ID >=CHIP_TSUM2   
              extern void OSDSetMask0(BYTE item, BYTE v);
              extern void OSDGDCurveSelectionForWindow(BYTE gi, BYTE wi, BYTE ci);
              extern void OSDConfGDCurveH(BYTE ci, BYTE pixel_init, BYTE delta_init, 
                              BYTE step, BYTE data_sign, BYTE delta_sign, BYTE delta, WORD length0, WORD length1,
                              BYTE hv_sign, BYTE overflow_en, BYTE md);
              extern void OSDConfGDCurveV(BYTE ci, BYTE pixel_init, BYTE delta_init, 
                              BYTE step, BYTE data_sign, BYTE delta_sign, BYTE delta, WORD length0, WORD length1,
                              BYTE overflow_en, BYTE md);
              void ClrGradualColor()
              {
                  OSDSetMask0(0x01,0);//GD Palette must Mask to 1
                  OSDSetMask0(0x09,0);//GD Palette must Mask to 1
                  OSDSetMask0(0x81,0);//GD Palette must Mask to 1
              
              
                  OSDGDCurveSelectionForWindow(OSD_GD_EG4, OSD_MAIN_WND, 1);
               //OSDConfGDCurveH( ci, Hpixel_init, Hdelta_init, Hstep, Hdata_sign, Hdelta_sign, Hdelta, Hlength0, Hlengt
             -h1, hv_sign, Hoverflow_en, Hmd );
                  OSDConfGDCurveH( 1,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,       0,            0,   0 );
               //OSDConfGDCurveV( ci, Vpixel_init, Vdelta_init, Vstep, Vdata_sign, Vdelta_sign, Vdelta, Vlength0, Vlengt
             -h1, Voverflow_en, Vmd );
                  OSDConfGDCurveV( 1,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,            0,   0 );
              
                  OSDSetMask0(0x0F,0);//GD Palette must Mask to 1
              
                  OSDGDCurveSelectionForWindow(OSD_GD_EG3, OSD_CURSOR_WND, 0);
               //OSDConfGDCurveH( ci, Hpixel_init, Hdelta_init, Hstep, Hdata_sign, Hdelta_sign, Hdelta, Hlength0, Hlengt
             -h1, hv_sign, Hoverflow_en, Hmd );
                  OSDConfGDCurveH( 0,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,       0,            0,   0 );
               //OSDConfGDCurveV( ci, Vpixel_init, Vdelta_init, Vstep, Vdata_sign, Vdelta_sign, Vdelta, Vlength0, Vlengt
             -h1, Voverflow_en, Vmd );
                  OSDConfGDCurveV( 0,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,            0,   0 );
              
              }
              void SetGradualColor_MAIN_WND(void)
              {
                  OSDSetMask0(0x01,1);//GD Palette must Mask to 1
                  OSDSetMask0(0x09,1);//GD Palette must Mask to 1
                  OSDSetMask0(0x81,1);//GD Palette must Mask to 1
              
                  OSDGDCurveSelectionForWindow(OSD_GD_EG4, OSD_MAIN_WND, 1);
               //OSDConfGDCurveH( ci, Hpixel_init, Hdelta_init, Hstep, Hdata_sign, Hdelta_sign, Hdelta, Hlength0, Hlengt
             -h1, hv_sign, Hoverflow_en, Hmd );
                  OSDConfGDCurveH( 1,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,       0,            0,   0 );
               //OSDConfGDCurveV( ci, Vpixel_init, Vdelta_init, Vstep, Vdata_sign, Vdelta_sign, Vdelta, Vlength0, Vlengt
             -h1, Voverflow_en, Vmd );
                  OSDConfGDCurveV( 1,        0xFF,        0x03,     0,          1,           0,      0,       90,   216-
             -90,            0,   0 );
              }
              void SetGradualColor_CURSOR_WND(void)
              {
                  OSDSetMask0(0x0F,1);//GD Palette must Mask to 1
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 33  

              
                  OSDGDCurveSelectionForWindow(OSD_GD_EG3, OSD_CURSOR_WND, 0);
               //OSDConfGDCurveH( ci, Hpixel_init, Hdelta_init, Hstep, Hdata_sign, Hdelta_sign, Hdelta, Hlength0, Hlengt
             -h1, hv_sign, Hoverflow_en, Hmd );
                  OSDConfGDCurveH( 0,        0x00,        0x00,     0,          0,           0,      0,   0xffff,   0xff
             -ff,       0,            0,   0 );
               //OSDConfGDCurveV( ci, Vpixel_init, Vdelta_init, Vstep, Vdata_sign, Vdelta_sign, Vdelta, Vlength0, Vlengt
             -h1, Voverflow_en, Vmd );
                  OSDConfGDCurveV( 0,        0xFF,        0x0F,     0,          1,           0,      0,       18,       
             - 0,            0,   0 );
              }
              
              #else
              void ClrGradualColor()
              {
                      drvOSD_SetWndCtrl(OSD_MAIN_WND, OSD_WND_CTRL2,
                                                       (OWC2_GD_COLOR_R(OSD_COLOR_FIX)|
                                                        OWC2_GD_COLOR_G(OSD_COLOR_FIX)|
                                                        OWC2_GD_COLOR_B(OSD_COLOR_FIX)),
                                                        OWC2MASK_ALL);
                  drvOSD_SetWndCtrl(OSD_CURSOR_WND, OSD_WND_CTRL2,
                                   (OWC2_GD_COLOR_R(OSD_COLOR_FIX)|
                                    OWC2_GD_COLOR_G(OSD_COLOR_FIX)|
                                    OWC2_GD_COLOR_B(OSD_COLOR_FIX)),
                                    OWC2MASK_ALL);
              
              }
              void SetGradualColor_MAIN_WND(void)
              {
                  BYTE u8Bank=msReadByte(OSD1_00);
                  msWriteByte(OSD1_00,0x01); //sunbank 1
              
                  if (msReadByte(OSD1_A3)!=0x80)
                  {
                      msWrite2ByteMask(OSD1_9E,0,0x3FF);//(5*18) //gd4 vlength 
                      msWriteByte(OSD1_A0,0xFF); //gd4 V init
                      msWriteByte(OSD1_A1,0x03); //gd4 V delta init
                      msWriteByte(OSD1_A2,0x01); //gd4 V step
                      msWriteByte(OSD1_A3,0x80); //gd4 V delta bit7 sign
                  }
              
                  msWriteByte(OSD1_00,u8Bank);
                
                      drvOSD_SetWndCtrl(OSD_MAIN_WND, OSD_WND_CTRL2,
                                                       (OWC2_GD_COLOR_R(OSD_GD_EG4)|
                                                        OWC2_GD_COLOR_G(OSD_GD_EG4)|
                                                        OWC2_GD_COLOR_B(OSD_GD_EG4)),
                                                        OWC2MASK_ALL);
              
              }
              void SetGradualColor_CURSOR_WND(void)
              {
                  BYTE u8Bank=msReadByte(OSD1_00);
                  msWriteByte(OSD1_00,0x01); //sunbank 1
              
                  if (msReadByte(OSD1_97)!=0x80)
                  {
                      msWrite2ByteMask(OSD1_92,0,0x3FF);//(1*18) //gd3 vlength
                      msWriteByte(OSD1_94,0xFF); //gd3 V init
                      msWriteByte(OSD1_95,0x0F); //gd3 V delta init
                      msWriteByte(OSD1_96,0x01); //gd3 V step
                      msWriteByte(OSD1_97,0x80); //gd3 V delta bit7 sign
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 34  

                  }
                  
                  msWriteByte(OSD1_00,u8Bank);
              
                  drvOSD_SetWndCtrl(OSD_CURSOR_WND, OSD_WND_CTRL2,
                                   (OWC2_GD_COLOR_R(OSD_GD_EG3)|
                                    OWC2_GD_COLOR_G(OSD_GD_EG3)|
                                    OWC2_GD_COLOR_B(OSD_GD_EG3)),
                                    OWC2MASK_ALL);
              }
              #endif
              
              #define MoveSpeed 40
              #define IS_OVER_XYRATIO(nY, mY, nX, mX, pX)((3*abs(nY-mY)*abs(mX-pX))>=(2*abs(nX-pX)))
              void SelectItem(BYTE ucXPos,BYTE ucYPos,BYTE ucColor)
              {
              #if 1
                  WORD xdata ucNowXPos=ucXPos;
                  WORD xdata ucNowYPos=ucYPos;
                  BYTE xdata ucMoveXPos=0;
                  BYTE xdata ucMoveYPos=0;
              
                  //printData("ucPreYPos[%d]", ucPreYPos);
                  //printData("ucNowYPos[%d]", ucNowYPos);
              
                  //first time or select/exec change
                  if ( ucPreYPos == 0)
                  {
                      //printData("---SetOSDWindosw", 0);
                      mStar_WaitForDataBlanking();
                      SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucYPos,ucYPos, ucColor);
                  }
                  else
                  {
                      mStar_WaitForDataBlanking();
                      if (ucNowYPos>ucPreYPos && ucNowXPos==ucPreXPos)
                      {
                          bMoveCURSORFlag = 1;
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucPreYPos,ucPreYPos, ucColor);
                          Delay1ms(MoveSpeed);
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucPreYPos+1,ucPreYPos+1, ucColor);
                          Delay1ms(MoveSpeed);
                          bMoveCURSORFlag = 0;
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucNowYPos,ucNowYPos, ucColor);
                      }
                      else if (ucNowYPos<ucPreYPos && ucNowXPos==ucPreXPos)
                      {
                          bMoveCURSORFlag = 1;
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucPreYPos,ucPreYPos, ucColor);
                          Delay1ms(MoveSpeed);
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucPreYPos-1,ucPreYPos-1, ucColor);
                          Delay1ms(MoveSpeed);
                          bMoveCURSORFlag = 0;
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucNowYPos,ucNowYPos, ucColor);
                      }
                      else if (ucNowYPos!=ucPreYPos || ucNowXPos!=ucPreXPos)
                      {
                          ucMoveYPos=ucPreYPos;
                          ucMoveXPos=ucPreXPos;
                          do {
                              Delay1ms(3*abs(ucNowXPos-ucMoveXPos)/2+1);
              
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 35  

                              if(IS_OVER_XYRATIO(ucNowYPos, ucMoveYPos, ucNowXPos, ucMoveXPos, ucPreXPos))
                              {
                                  if(ucMoveYPos != ucNowYPos)
                                  {
                                      if(ucPreYPos < ucNowYPos)
                                      {
                                          ucMoveYPos++;
                                      }
                                      else
                                      {
                                          ucMoveYPos--;
                                      }
                                  }
                              }
              
                              if(ucMoveXPos != ucNowXPos)
                              {
                                  if(ucPreXPos < ucNowXPos)
                                      ucMoveXPos = ucMoveXPos+((ucNowXPos-ucMoveXPos+3)/4);
                                  else
                                      ucMoveXPos = ucMoveXPos-((ucMoveXPos-ucNowXPos+3)/4);
                              }
                              
                              if (ucMoveYPos==ucNowYPos && ucMoveXPos==ucNowXPos)
                                  bMoveCURSORFlag = 0;
                              else    
                                  bMoveCURSORFlag = 1;
                              SetOSDWindosw(OSD_CURSOR_WND,ucMoveXPos-1,ucMoveXPos+26,ucMoveYPos,ucMoveYPos, ucColor);
              
                          }while(!(ucMoveYPos==ucNowYPos && ucMoveXPos==ucNowXPos));
              
                      }
                      else
                          SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucYPos,ucYPos, ucColor);
                  }
                  ucPreXPos=ucXPos;
                  ucPreYPos=ucYPos;
              #else
                  //mStar_WaitForDataBlanking();
                  SetOSDWindosw(OSD_CURSOR_WND,ucXPos-1,ucXPos+26,ucYPos,ucYPos, ucColor);
                  //SetOSDWindosw(OSD_ICON_WND,0,113,0,4, ucColor);
              #endif
              
              }
              #endif
              #endif
2091          
2092          
2093          void DrawOsdMenu(void)
2094          {
2095   1          Bool redrawFlags;
2096   1      
2097   1      #if ENABLE_DEBUG
              printData("MenuPageIndex       %d", MenuPageIndex);
              #endif
2100   1              
2101   1      
2102   1          Clr_JustShowValueFlag();
2103   1      //20171226
2104   1              if(LoadOSDDataFlag)//eshin
2105   1              {
2106   2                      Clr_LoadOSDDataFlag();
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 36  

2107   2                      Osd_Hide();
2108   2                      LoadCommonFont();
2109   2                  DynamicLoadFont(CurrentMenu.Fonts);
2110   2              }
2111   1      
2112   1          #if DEBUG_PRINTDATA
              //    printData("FontEndAddr[0x%]",FontEndAddr);
                  printData("MenuPageIndex=%d",MenuPageIndex);
                  printData("MenuItemIndex=%d",MenuItemIndex);
                  #endif       
2117   1      
2118   1          if (CurrentMenu.Flags &mpbInvisible)
2119   1          {
2120   2              Osd_Hide();
2121   2          }
2122   1          else
2123   1          {
2124   2              BYTE xdata i;
2125   2              redrawFlags = FALSE;
2126   2              //Set_FactoryModeFlag();        
2127   2      
2128   2                      
2129   2              if (CurrentMenu.Fonts &&(MenuPageIndex!=LanguageMenu)&&(PrevPage!=LanguageMenu) )
2130   2              {
2131   3                  DynamicLoadFont(CurrentMenu.Fonts);
2132   3              }
2133   2              else if (CurrentMenuItem.Fonts)
2134   2              {
2135   3                  DynamicLoadFont(CurrentMenuItem.Fonts);
2136   3              }
2137   2      
2138   2      
2139   2                      
2140   2      
2141   2              if(( CurrentMenu.XSize != OsdWindowWidth || CurrentMenu.YSize != OsdWindowHeight|| CurrentMenu.Fla
             -gs & mpbRedraw )
2142   2                      && !( MenuPageIndex == MainMenu && PrevPage != RootMenu&& PrevPage != LanguageMenu))
2143   2              {
2144   3                  redrawFlags = TRUE;
2145   3              }
2146   2      
2147   2      
2148   2              if (redrawFlags)
2149   2              {
2150   3                  Osd_Hide();
2151   3      
2152   3                  Osd_SetWindowSize(CurrentMenu.XSize, CurrentMenu.YSize);
2153   3               //   Delay1ms(200);              
2154   3      
2155   3      
2156   3                              if ((MenuPageIndex == MainMenu)&& PrevPage == RootMenu&&!(FactoryModeFlag))
2157   3                                      Osd_SetPosition(UserPrefOsdHStart, UserPrefOsdVStart);
2158   3                  else if (MenuPageIndex == InputInfoMenu)
2159   3                              {
2160   4                                  Osd_SetPosition(98, 98);
2161   4                              }
2162   3                      #if HotInputSelect
2163   3                              else if(MenuPageIndex == HotInputSelectMenu)
2164   3                              {
2165   4                                      #if EN_HotInputSelect_ShowCenter
2166   4                                      Osd_SetPosition(50, 50);
2167   4                                      #else
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 37  

                                              Osd_SetPosition(98, 98);
                                              #endif
2170   4                              }
2171   3                      #endif  
2172   3                  else
2173   3                  {
2174   4                                      if (CurrentMenu.Flags&mpbCenter)
2175   4                      {
2176   5                          Osd_SetPosition(50, 50);
2177   5                      }
2178   4                                      else if ((FactoryModeFlag)||MenuPageIndex==FactoryMenu)
2179   4                      {
2180   5                      Osd_SetPosition(5, 97);
2181   5                      } 
2182   4                      else if (!(CurrentMenu.Flags &mpbMoving))
2183   4                      {
2184   5                          Osd_SetPosition(UserPrefOsdHStart, UserPrefOsdVStart);
2185   5                      }                       
2186   4                  }
2187   3            //       Delay1ms(200);              
2188   3              
2189   3                  if (MenuPageIndex==LogoMenu)
2190   3                  {
2191   4                      // printMsg("draw logo");
2192   4                      Osd_SetPosition(50, 50);
2193   4                      moveX = 50;
2194   4                      moveY = 50;
2195   4                      #if (DisplayLogo!=NoBrand)
2196   4                      DrawLogo();
2197   4                      #endif
2198   4                  }
2199   3                      else if (MenuPageIndex == FactoryMenu
2200   3                              #if EN_ShowInfoUnderBurinInMenu
                                      ||MenuPageIndex == BurninMenu
                                      #endif
2203   3                              )
2204   3                      {
2205   4                          Osd_Hide(); 
2206   4                          Delay1ms(80);
2207   4                          Osd_LoadFacoryFontCP();
2208   4                              Set_LoadOSDDataFlag();
2209   4      
2210   4                      Osd_Set256TextColor( CP_BlueColor<<4|CP_BlueColor, Color_2);
2211   4                              for (i = 0; i <= OsdWindowHeight-1; i++)
2212   4                              {
2213   5                              Osd_DrawContinuesChar( 0 , i , SpaceFont , OsdWindowWidth);
2214   5                              }                        
2215   4                      }                       
2216   3                  else
2217   3                  {
2218   4                      DrawOsdBackGround();
2219   4                  }
2220   3      
2221   3                      #if Hot_Corss_ColorSelect       || Hot_Corss_FY_ColorSelect || Hot_Corss_FND_Select
                                      if(MenuPageIndex==HotCorssMenu)
                                              DrawOsdMenuItem(0, &CurrentMenu.MenuItems[0]);
                                      else
                          #endif       
2226   3                  for (i = 0; i < MenuItemCount; i++)
2227   3                  {
2228   4                      DrawOsdMenuItem(i, &CurrentMenu.MenuItems[i]);
2229   4                  }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 38  

2230   3                  
2231   3      
2232   3                  if(MenuPageIndex == LogoMenu)
2233   3                      Osd_SetTransparence(0);
2234   3                  else
2235   3                      Osd_SetTransparence(UserPrefOsdTrans);
2236   3      
2237   3                      Osd_Show();
2238   3         
2239   3              } // end redraw
2240   2              else
2241   2              {
2242   3              
2243   3              #if !AdjustLanguageFunction
                                      if(MenuPageIndex==LanguageMenu||(MenuPageIndex==OsdMenu&&PrevPage==LanguageMenu))                
                              {
                                              Osd_SetTextMonoColor(0x00, 0x07);
                                              for(i=SUB_TEXT_YPOS;i<0x0F;i+=2)
                                              {
                                                      Osd_DrawContinuesChar( SUB_TEXT_XPOS , i , SpaceFont , 0x27-SUB_TEXT_XPOS);
                                              }
                                              DynamicLoadFont(CurrentMenu.Fonts);
                                              for (i=0; i<MenuItemCount; i++)
                                      {
                                              if(i!=MenuItemIndex)
                                          {
                                              DrawOsdMenuItem(i, &CurrentMenu.MenuItems[i]);
                                                      }
                                      }
                                      }
                              #endif
2261   3                  DrawOsdMenuItem( MenuItemIndex, &CurrentMenu.MenuItems[MenuItemIndex] );
2262   3      
2263   3                      #if OsdHelpKeyType == OsdHelpKey_Under || OsdHelpKeyType ==      OsdHelpKey_Right
                                      UpdataHelyKeyShowInMenu();      
                              #endif
2266   3      
2267   3                      
2268   3              }
2269   2      #if  0//Show_BackLightTimeValue         
                      if (MenuPageIndex == FactoryMenu)               
                      {
                              Osd_DrawNum(12,25,BlacklitTime_H);
                              Osd_DrawNum(17,25,BlacklitTime_M);
                      }
              #endif
2276   2          }
2277   1          
2278   1          PrevPage = MenuPageIndex;
2279   1                  #if DEBUG_PRINTDATA
                      printMsg("End of Draw Menu...");
                  #endif      
2282   1          //printMsg("End of Draw Menu...");
2283   1      }
2284          
2285          
2286          
2287          //=========================================================================
2288          // draw menu item
2289          void DrawOsdMenuItem(BYTE itemIndex, MenuItemType *menuItem)
2290          {
2291   1          if( menuItem->Flags & mibFactoryItem && !FactoryModeFlag )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 39  

2292   1          {
2293   2              return ;
2294   2          }
2295   1      
2296   1          if( &CurrentMenuItem == menuItem && menuItem->Flags & mibSelectable )
2297   1          {
2298   2          }
2299   1              
2300   1      
2301   1          if( menuItem->Flags &mibSelectable && itemIndex == MenuItemIndex )
2302   1          {
2303   2              if( MenuPageIndex == FactoryMenu
2304   2                              #if EN_ShowInfoUnderBurinInMenu
                                      ||MenuPageIndex == BurninMenu
                                      #endif
2307   2                      )
2308   2              {
2309   3                  Osd_SetTextMonoColor( menuItem->SelForeColor, menuItem->SelBackColor );
2310   3              }
2311   2              else
2312   2              {
2313   3                  Osd_Set256TextColor( menuItem->SelForeColor, menuItem->SelBackColor );
2314   3              }
2315   2          }
2316   1          else
2317   1          {
2318   2              if( MenuPageIndex == FactoryMenu )
2319   2              {
2320   3                  Osd_SetTextMonoColor( menuItem->ForeColor, menuItem->BackColor );
2321   3              }
2322   2              else
2323   2              {
2324   3                  Osd_Set256TextColor( menuItem->ForeColor, menuItem->BackColor );
2325   3              }
2326   2          }
2327   1      
2328   1      
2329   1          DrawOsdMenuItemText( itemIndex, menuItem );
2330   1      
2331   1      
2332   1              
2333   1          if( MenuPageIndex == MainMenu && itemIndex == MenuItemIndex )
2334   1          {
2335   2              DrawOsdMenuItemValue( itemIndex, &( menuItem->DisplayValue ) );
2336   2          } 
2337   1          else if( MenuPageIndex > MainMenu && MenuPageIndex < ExitMenu)
2338   1          {
2339   2              if(PrevPage == MainMenu)
2340   2              return;
2341   2                      else
2342   2                      {
2343   3                              Osd_Set256TextColor( menuItem->ForeColor, menuItem->BackColor );
2344   3                              DrawOsdMenuItemValue( itemIndex, &( menuItem->DisplayValue ) );
2345   3                      }
2346   2          } 
2347   1          else        
2348   1          {
2349   2              DrawOsdMenuItemValue( itemIndex, &( menuItem->DisplayValue ) );
2350   2          } 
2351   1              
2352   1      }
2353          
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 40  

2354          
2355          
2356          
2357          //=========================================================================
2358          
2359          
2360          // draw menu item display text
2361          void DrawOsdMenuItemText(BYTE itemIndex, MenuItemType *menuItem)
2362          {
2363   1          if (menuItem->DisplayText == NULL && menuItem->DrawItemMethod != DWI_Icon)
2364   1          {
2365   2              return ;
2366   2          }
2367   1          
2368   1          if (menuItem->DrawItemMethod == DWI_Icon)
2369   1          {
2370   2              BYTE xdata i, j,*str;
2371   2              #if 1//20130417-1
2372   2              if(MenuPageIndex == MainMenu &&  MenuItemIndex == MAIN_MAX_ITEM && !FactoryModeFlag) // F item
2373   2                      return ;
2374   2              #endif         
2375   2              //printData("DWI_Icon[%d]",itemIndex);  
2376   2              if ( MenuPageIndex == MainMenu )
2377   2              {
2378   3                  str = menuItem->DisplayText();
2379   3                              
2380   3                              OSD_TEXT_HI_ADDR_SET_BIT9(); //enable bit 9
2381   3      
2382   3                              Osd_DrawCharDirect(menuItem->XPos, menuItem->YPos, str[0]);
2383   3                              Osd_DrawCharDirect(menuItem->XPos+1, menuItem->YPos, str[1]);
2384   3                              Osd_DrawCharDirect(menuItem->XPos+2, menuItem->YPos, str[2]);
2385   3                              Osd_DrawCharDirect(menuItem->XPos, menuItem->YPos+1, str[3]);
2386   3                              Osd_DrawCharDirect(menuItem->XPos+1, menuItem->YPos+1, str[4]);
2387   3                              Osd_DrawCharDirect(menuItem->XPos+2, menuItem->YPos+1, str[5]);
2388   3      
2389   3                              OSD_TEXT_HI_ADDR_CLR_TO_0();
2390   3      
2391   3                              if(itemIndex==MenuItemIndex)
2392   3                                      Osd_SetTextMonoColor(0x03,0x03);
2393   3                              else
2394   3                                      Osd_SetTextMonoColor(0x03,0x04);
2395   3                      
2396   3                              if(itemIndex==5)
2397   3                              {
2398   4                                      Osd_DrawCharDirect(0, 3+2*itemIndex, MenuFrame_LeftSide_1);
2399   4                                      Osd_DrawCharDirect(0, 4+2*itemIndex, MenuFrame_LeftSide_3);
2400   4                                      Osd_DrawCharDirect(4, 3+2*itemIndex, MenuFrame_RightSide_1);
2401   4                                      Osd_DrawCharDirect(4, 4+2*itemIndex, MenuFrame_RightSide_3);
2402   4                              }
2403   3                              else if(itemIndex>=0 && itemIndex<5)
2404   3                              {
2405   4                                      Osd_DrawCharDirect(0, 3+2*itemIndex, MenuFrame_LeftSide_1);
2406   4                                      Osd_DrawCharDirect(0, 4+2*itemIndex, MenuFrame_LeftSide_2);
2407   4                                      Osd_DrawCharDirect(4, 3+2*itemIndex, MenuFrame_RightSide_1);
2408   4                                      Osd_DrawCharDirect(4, 4+2*itemIndex, MenuFrame_RightSide_2);
2409   4                              }
2410   3              }
2411   2              else
2412   2              {
2413   3                      #if ENABLE_OVER_SCAN&& AudioFunc  
                              if (MenuPageIndex == HotExpansionMenu)
                              {   BYTE len;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 41  

                                  
                                  Osd_Set256TextColor( CPC_Background<<4|CPC_Background, Color_2);
                                  for (len=1; len<(OsdWindowHeight-1); len++)
                                      Osd_DrawContinuesChar( 1 , len , MonoSpace , (OsdWindowWidth-2));
                                  
                                  if  ( (UserprefExpansionMode >= PIC_FORMAT_17Picth&& UserprefExpansionMode <= PIC_FORM
             -AT_W23Picth))// && !INPUT_IS_NATIVE_TIMING())   //121228 Modify
                                  {   
                                      DynamicLoadFont_RatioStatus();
                                      len=*(ExpansionValueText()+1);
                                      len=OsdWindowWidth-len;
                                      len=(len+1)/2;
                                      Osd_Set256TextColor( CP_SelectItem, Color_2 );
                                      Osd_DrawPropStr( len, (OsdWindowHeight/2),     ExpansionValueText() );
                                  }
                                  else
                                  {
                                      DynamicLoadHotIconFont();  //Load Icon font
                                      
                                      Osd_Set256TextColor( CP_SelectIcon >> 3, Color_8);
                                      
                                      OSD_TEXT_HI_ADDR_SET_BIT9(); //enable bit 9
                                      for( i = 0; i < 5; i++ )
                                      {
                                          for( j = 0; j < 3; j++ )
                                          {
                                              Osd_DrawCharDirect( menuItem->XPos + i , menuItem->YPos + j, _8ColorBigIco
             -nFont+i*3+j*15 );
                                          }
                                      }
                                      OSD_TEXT_HI_ADDR_CLR_TO_0();
              
                                  }
                              }
                              else
                           #elif HotExpansionAdjust
2450   3                         if (MenuPageIndex == HotExpansionMenu)
2451   3                      {
2452   4                              DynamicLoadHotIconFont();  //Load Icon font
2453   4                              
2454   4                              Osd_Set256TextColor( CP_SelectIcon >> 3, Color_8);
2455   4                              
2456   4                              OSD_TEXT_HI_ADDR_SET_BIT9(); //enable bit 9
2457   4                              for( i = 0; i < 5; i++ )
2458   4                                  for( j = 0; j < 3; j++ )
2459   4                                      Osd_DrawCharDirect( menuItem->XPos + i , menuItem->YPos + j, _8ColorHotIco
             -nStart+i*3+j*15 );
2460   4      
2461   4                              OSD_TEXT_HI_ADDR_CLR_TO_0();
2462   4      
2463   4                          }
2464   3                         else
2465   3                  #endif
2466   3                      {
2467   4                          DynamicLoadHotIconFont();  //Load Icon font                   
2468   4                            Osd_Set256TextColor(0x20, Color_4);       
2469   4                        
2470   4                          OSD_TEXT_HI_ADDR_SET_BIT9(); //enable bit 9
2471   4                        
2472   4                          for( j = 0; j < 3; j++ )
2473   4                                for( i = 0; i <4; i++ )                               
2474   4                                  Osd_DrawCharDirect( menuItem->XPos + i , menuItem->YPos + j, _4ColorHotIconSta
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 42  

             -rt+(i+j*4)*2 );
2475   4                          OSD_TEXT_HI_ADDR_CLR_TO_0();
2476   4                      }
2477   3              }
2478   2          }
2479   1          #if Hot_Corss_ColorSelect
                      else if (menuItem->DrawItemMethod==DWI_8x5Icon)
                      {
                                      BYTE xdata i, j,*str;               
                                    Osd_SetTextMonoColor( menuItem->SelForeColor, menuItem->SelBackColor );
                                       str = menuItem->DisplayText();
                                  OSD_TEXT_HI_ADDR_SET_BIT8(); //enable bit 9
                                
                                  for( j = 0; j < 5; j++ )
                                        for( i = 0; i <8; i++ )                               
                                          Osd_DrawCharDirect( menuItem->XPos + i , menuItem->YPos + j, *(str++));
                                  OSD_TEXT_HI_ADDR_CLR_TO_0();
                      }
                 #elif        Hot_Corss_FY_ColorSelect || Hot_Corss_FND_Select
                 else if (menuItem->DrawItemMethod==DWI_10x6Icon)
                      {
                                      BYTE xdata i, j,*str;               
                                    Osd_SetTextMonoColor( menuItem->SelForeColor, menuItem->SelBackColor );
                                       str = menuItem->DisplayText();
                                  OSD_TEXT_HI_ADDR_SET_BIT8(); //enable bit 9
                                
                                  for( j = 0; j < 6; j++ )
                                        for( i = 0; i <10; i++ )                              
                                          Osd_DrawCharDirect( menuItem->XPos + i , menuItem->YPos + j, *(str+i+11*j));
                                  OSD_TEXT_HI_ADDR_CLR_TO_0();
                      }   
                  #endif
2506   1              
2507   1          else if (menuItem->DrawItemMethod == DWI_Text)
2508   1          {
2509   2              if ( MenuPageIndex == FactoryMenu )
2510   2              {
2511   3                  Osd_DrawRealStr_F( menuItem->XPos, menuItem->YPos, menuItem->DisplayText() );
2512   3              }
2513   2              else
2514   2              {
2515   3                  if (menuItem->DisplayText() == Main_FText())
2516   3                  {
2517   4                      if( itemIndex == MenuItemIndex )
2518   4                                      Osd_SetTextMonoColor( menuItem->SelForeColor, menuItem->SelBackColor );
2519   4                      else
2520   4                                      Osd_SetTextMonoColor( menuItem->ForeColor, menuItem->BackColor );
2521   4                  }
2522   3                          Osd_DrawPropStr(menuItem->XPos, menuItem->YPos, menuItem->DisplayText());
2523   3              }
2524   2          }
2525   1          else
2526   1          // full text
2527   1          {
2528   2              BYTE xPos;
2529   2              #define len itemIndex
2530   2              if (menuItem->DrawItemMethod == DWI_FullText)
2531   2              {
2532   3                  xPos = menuItem->XPos;
2533   3                  Osd_DrawRealStr(xPos, menuItem->YPos, menuItem->DisplayText());
2534   3              }
2535   2              else if (menuItem->DrawItemMethod==DWI_CenterPropText)
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 43  

2536   2              {
2537   3              #if 0//Dual
                          if (menuItem->DisplayText() == NoSyncStatusText() && (UserPrefInputSelectType==INPUT_PRIORITY_
             -AUTO))        //120301 Modify
                              return;
                      #endif
2541   3      
2542   3                      #if INPUT_TYPE == INPUT_1A2H || INPUT_TYPE == INPUT_2H  //120511 Modify
                      #endif
2544   3      
2545   3                      {
2546   4                                      len=*(menuItem->DisplayText()+1);
2547   4                              len=OsdWindowWidth-len;
2548   4                              len=(len+1)/2;
2549   4                      }
2550   3              
2551   3                              
2552   3                  Osd_DrawPropStr(len,menuItem->YPos, menuItem->DisplayText());
2553   3              }
2554   2              #undef len
2555   2          }
2556   1      }
2557          //=========================================================================
2558          // draw menu item display value
2559          void DrawOsdMenuItemValue(BYTE itemIndex, DrawValueType *valueItem)
2560          {
2561   1          //printData("value address %x", (WORD)valueItem);
2562   1          if (valueItem->DrawNumber)
2563   1          {
2564   2              DrawOsdMenuItemNumber(itemIndex, valueItem->DrawNumber);
2565   2          }
2566   1          if (valueItem->DrawGuage)
2567   1          {
2568   2              DrawOsdMenuItemGuage(itemIndex, valueItem->DrawGuage);
2569   2          }
2570   1          if (valueItem->DrawRadioGroup)
2571   1          {
2572   2              DrawOsdMenuItemRadioGroup(itemIndex, valueItem->DrawRadioGroup);
2573   2          }
2574   1          #if 0  //2006-08-04 Andy
                if ((valueItem->DrawRadioGroup && itemIndex == MenuItemIndex)
                    ||(valueItem->DrawRadioGroup && MenuPageIndex>MainMenu))//||(valueItem->DrawRadioGroup&&MenuPageInde
             -x==FactoryMenu))
                          DrawOsdMenuItemRadioGroup(itemIndex, valueItem->DrawRadioGroup);
                  #endif
2579   1          // printData("value address %x", (WORD)valueItem);
2580   1      }
2581          //=========================================================================
2582          // draw number
2583          void DrawOsdMenuItemNumber(BYTE itemIndex, DrawNumberType *numberItem)
2584          {
2585   1          itemIndex = 0;
2586   1          #if Multi_Number
2587   1              {
2588   2              NumberType *number;
2589   2              BYTE i = 0;
2590   2              number = numberItem->DisplayNumber;
2591   2      
2592   2              if( number )
2593   2              {
2594   3                  #define drawItem    (number+i)
2595   3                  while( 1 )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 44  

2596   3                  {                   
2597   4                      if( drawItem->Flags & dwiHex )
2598   4                      {
2599   5                          Osd_DrawHex( drawItem->XPos, drawItem->YPos, drawItem->GetValue() );
2600   5                      }
2601   4                      else
2602   4                      {  
2603   5                                                      #if AboutDSUBFunc_Enable
2604   5                                                       if((MenuPageIndex == FactoryMenu)&&
2605   5                                                              (
2606   5                                                                drawItem->GetValue==GetRedGainValue
2607   5                                                              ||drawItem->GetValue==GetGreenGainValue
2608   5                                                              ||drawItem->GetValue==GetBlueGainValue
2609   5                                                              ||drawItem->GetValue==GetAdcRedOffsetValue
2610   5                                                              ||drawItem->GetValue==GetAdcGreenOffsetValue
2611   5                                                              ||drawItem->GetValue==GetAdcBlueOffsetValue
2612   5                                                              )) 
2613   5                                                              {
2614   6                                                              DrawNum( drawItem->XPos, drawItem->YPos, 4, drawItem->GetValue() );
2615   6                                                              }
2616   5                                                       else
2617   5                                                      #endif
2618   5                              Osd_DrawNum( drawItem->XPos, drawItem->YPos, drawItem->GetValue() );
2619   5                                                                              #if !Enable_Adjust_SharpnessMenu
2620   5                                              #ifdef OffPower
                                  if ( drawItem->Flags & dwiOffTimer)
                                  {   
                                      if (GetAutoPowerOffValue() < 10)
                                      {
                                          Osd_DrawCharDirect(drawItem->XPos + 2,drawItem->YPos, MonoNumberStart);
                                      }
                                  }
                                                      #endif
2629   5                                              #endif
2630   5      
2631   5                      }
2632   4                      if( drawItem->Flags & dwiEnd )
2633   4                      {
2634   5                          break;
2635   5                      }
2636   4                      i++;
2637   4                  }
2638   3                  #undef drawItem
2639   3              }
2640   2          }
2641   1          #else
                      #define xPos itemIndex
                      xPos = numberItem->XPos;
                      if (xPos == 0)
                      {
                          xPos = (OsdWindowWidth - 4) / 2-1;
                      }
                      if (FactoryModeFlag && MenuPageIndex == FactoryMenu)
                      {
              
                          if (CurrentMenuItem.DisplayValue.DrawNumber == numberItem)
                          {
                              Osd_SetTextColor(numberItem->ForeColor, numberItem->BackColor);
                          }
                          else
                          {
                              Osd_SetTextColor(CP_WhiteColor, CP_BlueColor);
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 45  

                          }
                      }
                      else
                      {
                          Osd_SetTextColor(numberItem->ForeColor, numberItem->BackColor);
                      }
                      if (numberItem->Flags &dwiHex)
                      {
                          Osd_DrawHex(numberItem->XPos, numberItem->YPos, numberItem->GetValue());
                      }
                      else
                      {
                          Osd_DrawNum(numberItem->XPos, numberItem->YPos, numberItem->GetValue());
                      }
                      #undef xPos
                  #endif
2674   1      }
2675          
2676          //=========================================================================
2677          // draw guage
2678          void DrawOsdMenuItemGuage(BYTE itemIndex, DrawGuageType *gaugeItem)
2679          {
2680   1          //BYTE yPos;
2681   1          itemIndex = 0;
2682   1          #if Multi_Gauge
2683   1              {
2684   2                  BYTE i;
2685   2                  GaugeType *gauge;
2686   2                  gauge = gaugeItem->DisplayGauge;
2687   2                  if (!JustShowValueFlag)
2688   2                  {
2689   3                      if (MenuPageIndex != FactoryMenu)
2690   3                      {
2691   4                          if (gauge->Flags &dwiGauge)
2692   4                          {
2693   5                              Osd_SetTextColor(0, gaugeItem->BackColor);
2694   5                          }
2695   4                      }
2696   3                  }
2697   2                  if (gauge)
2698   2                  {
2699   3                      i = 0;
2700   3                      #define drawItem    (gauge+i)
2701   3                      #define xPos    itemIndex
2702   3                      while (1)
2703   3                      {
2704   4                          xPos = drawItem->XPos;
2705   4                          if (xPos == 0)
2706   4                          {
2707   5                              xPos = (OsdWindowWidth - gaugeItem->Length) / 2;
2708   5                          }
2709   4                          //Osd_SetTextColor(0, gaugeItem->BackColor);
2710   4                          Osd_DrawGuage(xPos, drawItem->YPos, gaugeItem->Length, drawItem->GetValue());
2711   4                          if (drawItem->Flags &dwiEnd)
2712   4                          {
2713   5                              break;
2714   5                          }
2715   4                          i++;
2716   4                      }
2717   3                      #undef xPos
2718   3                      #undef drawItem
2719   3                  }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 46  

2720   2              }
2721   1          #else
                      #define xPos    itemIndex
                      xPos = gaugeItem->XPos;
                      //yPos=gaugeItem->YPos;
                      if (xPos == 0)
                      {
                          xPos = (OsdWindowWidth - gaugeItem->Length) / 2;
                      }
                      if (!(CurrentMenu.Flags &mpbAdjust))
                      {
                          Osd_SetTextColor(gaugeItem->ForeColor, gaugeItem->BackColor);
                      }
                      else
                      {
                          Osd_SetTextColor(CP_RedColor, CP_WhiteColor);
                      }
                      Osd_DrawGuage(gaugeItem->XPos, gaugeItem->YPos, gaugeItem->Length, gaugeItem->GetValue());
                      #undef xPos
                  #endif
2740   1      }
2741          
2742          //=========================================================================
2743          // draw radio
2744          void DrawOsdMenuItemRadioGroup(BYTE itemIndex, DrawRadioGroupType *radioItem)
2745          {
2746   1          RadioTextType *radioText;
2747   1      
2748   1          radioText = radioItem->RadioText;
2749   1          if( radioText )
2750   1          {
2751   2              BYTE i = 0;
2752   2              BYTE xPos;
2753   2              BYTE tmplength = 0;     
2754   2            //  itemIndex = 0xFF;
2755   2              if( radioItem->GetValue )
2756   2              {
2757   3                  itemIndex = radioItem->GetValue();
2758   3              }
2759   2      #define drawItem    (radioText+i)
2760   2              while( 1 )
2761   2              {
2762   3                  if( drawItem->DisplayText )
2763   3                  {
2764   4                      xPos = drawItem->XPos;
2765   4                      if( xPos == 0 )
2766   4                      {
2767   5                          if( MenuPageIndex == FactoryMenu )
2768   5                              xPos = ( OsdWindowWidth - strlen( drawItem->DisplayText() ) + 1 ) / 2;
2769   5                      }
2770   4      
2771   4                      if( drawItem->Flags & dwiRadioGroup )
2772   4                      {
2773   5                              #if Hotkey_ECO_Text_Enable
                                      if(MenuPageIndex==HotKeyECOMenu)
                                              //Osd_SetTextColor( radioItem->ForeColor, radioItem->BackColor );
                                              Osd_SetTextMonoColor(5, 0x0E);
                                      else
                                      #endif
2779   5                                      Osd_Set256TextColor( radioItem->ForeColor, radioItem->BackColor );
2780   5                      }
2781   4      
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 47  

2782   4                      if ( MenuPageIndex == FactoryMenu
2783   4                              #if EN_ShowInfoUnderBurinInMenu
                                      ||MenuPageIndex == BurninMenu
                                      #endif
2786   4                              )
2787   4                      {
2788   5      
2789   5                          Osd_DrawRealStr_F( xPos, drawItem->YPos, drawItem->DisplayText() );
2790   5                      }
2791   4                        else if(MenuPageIndex == MainMenu &&(drawItem->Flags & dwiMainTitle))
2792   4                        {
2793   5                               tmplength = *( drawItem->DisplayText() + 1 );
2794   5                              
2795   5                              if(itemIndex !=MenuItemIndex)
2796   5                                      break;
2797   5                              
2798   5                              xPos = (MAIN_MENU_H_SIZE-tmplength+1)/2;                                
2799   5                              Osd_DrawPropStr( xPos, drawItem->YPos, drawItem->DisplayText() );
2800   5                        }
2801   4                      else
2802   4                      {
2803   5                          if( drawItem->Flags & dwiCenterArrowAlign )
2804   5                          {
2805   6                               tmplength = *( drawItem->DisplayText() + 1 );
2806   6      
2807   6                                  xPos = (drawItem->XPos+CENTER_ALIGN_STARTPOS)+(CENTER_ALIGN_LEN-tmplength+1)/2
             -;
2808   6                                  Osd_DrawCharDirect( drawItem->XPos+CENTER_ALIGN_STARTPOS, drawItem->YPos, Mono
             -Mark_Left);
2809   6                                  Osd_DrawCharDirect( drawItem->XPos+CENTER_ALIGN_ENDPOS, drawItem->YPos, MonoMa
             -rk_Right);
2810   6      
2811   6                              #if ENABLE_OVER_SCAN//1//Eson20130116
                                      if ( drawItem->DisplayText == ExpansionValueText)
                                          DynamicLoadFont_RatioStatus();
                                      #endif
2815   6                          }
2816   5                              else if( drawItem->Flags & dwiCenterText )
2817   5                          {
2818   6                               tmplength = *( drawItem->DisplayText() + 1 );
2819   6                                      xPos = (HOT_MENU_H_SIZE-tmplength+1)/2;
2820   6                              //    xPos = (drawItem->XPos+CENTER_ALIGN_STARTPOS)+(CENTER_ALIGN_LEN-tmplength+1)
             -/2;
2821   6                          }
2822   5                                      
2823   5                          Osd_DrawPropStr( xPos, drawItem->YPos, drawItem->DisplayText() );
2824   5                      }
2825   4                  }
2826   3                  if( drawItem->Flags & dwiEnd )
2827   3                  {
2828   4                      break;
2829   4                  }
2830   3                  i++;
2831   3              }
2832   2      #undef drawItem
2833   2          }
2834   1      }
2835          
2836          void DrawOsdSubMenuItemValue( BYTE itemIndex, DrawValueType *valueItem )
2837          {
2838   1          if( valueItem->DrawNumber )
2839   1          {
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 48  

2840   2              DrawOsdMenuItemNumber( itemIndex, valueItem->DrawNumber );
2841   2          }
2842   1          if( valueItem->DrawGuage )
2843   1          {
2844   2              DrawOsdMenuItemGuage( itemIndex, valueItem->DrawGuage );
2845   2          }
2846   1          if( valueItem->DrawRadioGroup )
2847   1          {
2848   2              DrawOsdMenuItemRadioGroup( itemIndex, valueItem->DrawRadioGroup );
2849   2          }
2850   1      }
2851          
2852          void DrawOsdSubMenuItem( BYTE itemIndex, MenuItemType *menuItem )
2853          {
2854   1          if( menuItem->Flags & mibInvisible )
2855   1              return;
2856   1      #if CHIP_ID>=CHIP_TSUMC
2857   1              if( menuItem->Flags&mibDVIDisable && ( SrcInputType == Input_Digital || SrcInputType == Input_Digi
             -tal2 || SrcInputType == Input_Displayport|| SrcInputType == Input_Displayport3 ) ) //121128 Modify
2858   1      #else
                      if( menuItem->Flags&mibDVIDisable && ( SrcInputType == Input_Digital || SrcInputType == Input_Digi
             -tal2 || SrcInputType == Input_Displayport ) ) //121128 Modify
              #endif
2861   1              Osd_Set256TextColor( CP_DisableItem, Color_2 );
2862   1              #if FreeSyncMenu_Enable
                      else if( menuItem->Flags & mibFreeSyncDisable  && (SrcInputType != Input_HDMI) )
                      Osd_Set256TextColor( CP_DisableItem, Color_2 );
                      #endif
2866   1          else if( menuItem->Flags & mibUserColor  && ( UserPrefColorTemp != CTEMP_USER ) 
2867   1      #if PresetMode_Enable
                      &&( UserPrefColorTemp_Preset!= CTEMP_USER )
              #endif
2870   1              )
2871   1              Osd_Set256TextColor( CP_DisableItem, Color_2 );
2872   1      #if (ENABLE_DUAL_LINK)&&(ENABLE_RTE)            //130402 Modify
                  else if( menuItem->Flags & mibODDisable && ( Disabe_Overdrive_Item ) )      
                      Osd_Set256TextColor( CP_DisableItem, Color_2 );
              #endif
2876   1          else if( menuItem->Flags & mibDCRDisable && ( UserPrefDcrMode ) )
2877   1              Osd_Set256TextColor( CP_DisableItem, Color_2 );
2878   1          else if( menuItem->Flags & mibStdEnable && ( UserPrefECOMode != ECO_Standard )
2879   1      #if PresetMode_Enable
                      &&UserPrefECOMode != ECO_Preset
              #endif
2882   1              )
2883   1              Osd_Set256TextColor( CP_DisableItem, Color_2 );
2884   1              #if CT_sRGB_ENABLE
                  else if( menuItem->Flags & mibsRGBDisable && ( UserPrefColorTemp == CTEMP_SRGB && UserPrefECOMode == E
             -CO_Standard ) )
                      Osd_Set256TextColor( CP_DisableItem, Color_2 );
                      #endif
2888   1      #if Enable_Expansion
2889   1              #if ENABLE_OVER_SCAN    //121228 Modify
                  //else if( menuItem->Flags & mibExpansionDisable && INPUT_IS_NATIVE_TIMING())
                      #else
2892   1          else if( menuItem->Flags & mibExpansionDisable && !ExpansionFlag )
2893   1              Osd_Set256TextColor( CP_DisableItem, Color_2 );
2894   1              #endif
2895   1      #endif
2896   1      #if  LowBlueLightType == LowBlueLight_SharpFunc
                      else if(( (MIB_LOWBLUEDISABLE & menuItem->Flags) && (UserPrefColorTemp!=CTEMP_LowBlue)))
                                      Osd_Set256TextColor( CP_DisableItem, Color_2 );
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 49  

              #endif
2900   1              #if Disable_VgaToAdjustVolume
                      else if(( (mibAutioDisable & menuItem->Flags) && CURRENT_INPUT_IS_VGA()))
                                      Osd_Set256TextColor( CP_DisableItem, Color_2 ); 
                       #endif 
2904   1          else
2905   1              Osd_Set256TextColor( menuItem->ForeColor, menuItem->BackColor );
2906   1      
2907   1          DrawOsdMenuItemText( itemIndex, menuItem );
2908   1          DrawOsdSubMenuItemValue( itemIndex, &( menuItem->DisplayValue ) );
2909   1      }
2910          
2911          void DrawOsdSubMenu( BYTE menupage )
2912          {
2913   1          BYTE i;
2914   1      
2915   1          if( CurrentMenuItem.Flags & mibFactoryItem ) // Do not Display Factory Menu
2916   1              return;
2917   1      
2918   1          for( i = 0; i < tblMenus[menupage].ItemCount; i++ )
2919   1              DrawOsdSubMenuItem( i, &tblMenus[menupage].MenuItems[i] );
2920   1      
2921   1      
2922   1      }
2923          
2924          
2925          
2926          
2927          
2928          Bool DrawTimingInfo(void)
2929          {
2930   1          WORD xdata freq;
2931   1          BYTE xdata VFreqProp[4];
2932   1          WORD xdata HDisplay = StandardModeWidth;//mStar_ReadWord(SPRHDC_H) & 0xfffe;
2933   1          WORD xdata VDisplay = StandardModeHeight;//mStar_ReadWord(SPRVDC_H);
2934   1          BYTE xdata ResolutionProp[28]={0};
2935   1          BYTE xdata TempPropData[5];
2936   1          BYTE xdata number,i,j,Vnumber;
2937   1          WORD xdata FontWide=0;
2938   1      
2939   1      Osd_Set256TextColor( CP_UnselectItem, Color_2 );
2940   1          OSD_FONT_HI_ADDR_SET_BIT8();//0x100~0x1FF
2941   1          Osd_DynamicLoadFont(ResoulationAddress, ResolutionProp,27); //20180109  1152x864 60hz 
             -
2942   1          OSD_FONT_HI_ADDR_CLR_TO_0();  
2943   1      
2944   1          for (Vnumber=0;Vnumber<8;Vnumber++)
2945   1              VFreqProp[Vnumber]=0x01;//space
2946   1          for (number=0;number<28;number++)
2947   1              ResolutionProp[number]=0x01;//space
2948   1      
2949   1      #if (ENABLE_FREESYNC) // C3583 use adaptive sync can't show FreeSync
                      Vnumber = 0;
                      if(IS_HDMI_FREESYNC() || IS_DP_FREESYNC())
                      {
              
                      }
                      else
              #endif
2957   1          {
2958   2          //---V Freq--------------------------------------------------------------
2959   2              FontWide=0;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 50  

2960   2              freq=VFreq(HFreq(SrcHPeriod), SrcVTotal);
2961   2          
2962   2              // 120424 coding addition for intermode vfreq information
2963   2              if(CURRENT_SOURCE_IS_INTERLACE_MODE())
2964   2              {
2965   3                  freq *= 2;
2966   3              }
2967   2              
2968   2              if( ( freq % 10 ) >= 5 )        //120105 Modify for TPV Request
2969   2              {
2970   3                  freq = ( freq + 10 ) / 10;
2971   3              }
2972   2              else
2973   2              {
2974   3                  freq = freq / 10;
2975   3              }
2976   2              if (freq>=100)
2977   2              {
2978   3                  Vnumber = 3;
2979   3                      VFreqProp[0]=(freq/100)+0x30;
2980   3                      VFreqProp[1]=((freq%100)/10)+0x30;
2981   3                      VFreqProp[2]=(freq%10)+0x30;
2982   3              }
2983   2              else
2984   2              {
2985   3                  Vnumber = 2;
2986   3                      VFreqProp[0]=(freq/10)+0x30;
2987   3                      VFreqProp[1]=(freq%10)+0x30;
2988   3              }
2989   2          }
2990   1      
2991   1      //---Resoulation--------------------------------------------------------------
2992   1          FontWide=0;
2993   1          //120925 Modify
2994   1      #if CHIP_ID == CHIP_TSUMC || CHIP_ID == CHIP_TSUMD|| CHIP_ID == CHIP_TSUM9||CHIP_ID == CHIP_TSUMF//130603 
             -miff
2995   1              HDisplay = SC0_READ_IMAGE_WIDTH();
2996   1      #else
                  if(CURRENT_INPUT_IS_DISPLAYPORT())
                      {
                              HDisplay =2* SC0_READ_IMAGE_WIDTH();
                      }
                  else
                      {
                          HDisplay = SC0_READ_IMAGE_WIDTH();
                      }
              #endif  
3006   1      
3007   1      #if ENABLE_DUAL_LINK            //130108_23 Henrya
              if(CURRENT_INPUT_IS_DVI())
                      if(msReadByte(SC0_A6)&BIT1)
                      HDisplay=2*SC0_READ_IMAGE_WIDTH();
              #endif
3012   1      
3013   1              if( abs( HDisplay - 720 ) < 5 )
3014   1                      HDisplay = 720;
3015   1              else if( abs( HDisplay - 1280 ) < 5 )
3016   1                      HDisplay = 1280;
3017   1              else if( abs( HDisplay - 1920 ) < 5 )
3018   1                      HDisplay = 1920;
3019   1              else if(( HDisplay == 1366 ) && ( StandardModeGroup == Res_1360x768 ) )
3020   1                      HDisplay = 1360;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 51  

3021   1          if (HDisplay>=1000)
3022   1          {
3023   2              number = 4;
3024   2                      TempPropData[0]=(HDisplay/1000)+0x30;
3025   2                      TempPropData[1]=((HDisplay%1000)/100)+0x30;
3026   2                      TempPropData[2]=((HDisplay%100)/10)+0x30;
3027   2                      TempPropData[3]=(HDisplay%10)+0x30;
3028   2          }
3029   1          else
3030   1          {
3031   2              number = 3;
3032   2                      TempPropData[0]=(HDisplay/100)+0x30;
3033   2                      TempPropData[1]=((HDisplay%100)/10)+0x30;
3034   2                      TempPropData[2]=(HDisplay%10)+0x30;
3035   2          }
3036   1      
3037   1              for ( i = 0; i < number; i++ )
3038   1              {
3039   2                      if(TempPropData[i]>=0x30 && TempPropData[i]<=0x39)//0~9
3040   2                              ResolutionProp[i]=TempPropData[i]-0x1F;
3041   2      
3042   2              if (TempPropData[i]==0x31)// 1
3043   2                              FontWide+=3;
3044   2                      else// 0~9
3045   2                              FontWide+=8;
3046   2      
3047   2                      FontWide+=1;
3048   2              }
3049   1      
3050   1          ResolutionProp[i++]=0x01;//space
3051   1              FontWide+=2;
3052   1              FontWide+=1;
3053   1      
3054   1          ResolutionProp[i++]=0x39;//X
3055   1              FontWide+=9;
3056   1              FontWide+=1;
3057   1      
3058   1          //120925 Modify
3059   1              if( StandardModeGroup == Res_720x480 && ( CURRENT_SOURCE_IS_INTERLACE_MODE() ) && !CURRENT_INPUT_IS_VGA()
             - )
3060   1                      VDisplay = 480;
3061   1              else if ( StandardModeGroup == Res_720x576 )
3062   1                      VDisplay = 576;
3063   1              else if( StandardModeGroup == Res_1920x1080 )
3064   1                      VDisplay = 1080;
3065   1              else if( !CURRENT_INPUT_IS_VGA() && !( CURRENT_SOURCE_IS_INTERLACE_MODE() ) )
3066   1                      VDisplay = SC0_READ_AUTO_HEIGHT();
3067   1              else
3068   1              {
3069   2                      if(DecVScaleFlag)
3070   2                              VDisplay = SC0_READ_IMAGE_HEIGHT() - DecVScaleValue;
3071   2                      else
3072   2                              VDisplay = SC0_READ_IMAGE_HEIGHT();
3073   2              }
3074   1          if (VDisplay>=1000)
3075   1          {
3076   2              number = 4;
3077   2                      TempPropData[0]=(VDisplay/1000)+0x30;
3078   2                      TempPropData[1]=((VDisplay%1000)/100)+0x30;
3079   2                      TempPropData[2]=((VDisplay%100)/10)+0x30;
3080   2                      TempPropData[3]=(VDisplay%10)+0x30;
3081   2          }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 52  

3082   1          else
3083   1          {
3084   2              number = 3;
3085   2                      TempPropData[0]=(VDisplay/100)+0x30;
3086   2                      TempPropData[1]=((VDisplay%100)/10)+0x30;
3087   2                      TempPropData[2]=(VDisplay%10)+0x30;
3088   2          }
3089   1      
3090   1              for ( j=i; j < i+number; j++ )
3091   1              {
3092   2                      if(TempPropData[j-i]>=0x30 && TempPropData[j-i]<=0x39)//0~9
3093   2                              ResolutionProp[j]=TempPropData[j-i]-0x1F;
3094   2              if (TempPropData[j-i]==0x31)// 1
3095   2                              FontWide+=3;
3096   2                      else// 0~9
3097   2                              FontWide+=8;
3098   2      
3099   2                      FontWide+=1;
3100   2              }
3101   1                      
3102   1              ResolutionProp[j++]=0x01;//space
3103   1              FontWide+=2;
3104   1              FontWide+=1;
3105   1      
3106   1             ResolutionProp[j++]=0x01;// space
3107   1              FontWide+=8;
3108   1              FontWide+=1;    
3109   1             ResolutionProp[j++]=0x01;// space
3110   1              FontWide+=8;
3111   1              FontWide+=1;    
3112   1              ResolutionProp[j++]=0x01;//space
3113   1              FontWide+=2;
3114   1              FontWide+=1;
3115   1      
3116   1      #if (ENABLE_FREESYNC) // C3583 use adaptive sync can't show FreeSync
                      if(IS_HDMI_FREESYNC() || IS_DP_FREESYNC())
                              Osd_DrawPropStr( 0x1A, TimingInfoYpos, VsyncText() );
                      else
              #endif
3121   1      {
3122   2      //----------------------------------VFreq    
3123   2              for ( i = 0; i < Vnumber; i++,j++ )
3124   2              {
3125   3                      if(VFreqProp[i]>=0x30 && VFreqProp[i]<=0x39)//0~9
3126   3                              ResolutionProp[j]=VFreqProp[i]-0x1F;
3127   3          
3128   3                  if (VFreqProp[i]==0x31)// 1
3129   3                              FontWide+=3;
3130   3                      else// 0~9
3131   3                              FontWide+=8;
3132   3          
3133   3                      FontWide+=1;
3134   3              }
3135   2              
3136   2             ResolutionProp[j++]=0x29;//H
3137   2              FontWide+=8;
3138   2              FontWide+=1;
3139   2          
3140   2             ResolutionProp[j++]=0x5B;//z
3141   2              FontWide+=8;
3142   2              FontWide+=1;
3143   2      
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 53  

3144   2              
3145   2              ResolutionProp[j++]=0x01;//space
3146   2              FontWide+=2;
3147   2              FontWide+=1;
3148   2              ResolutionProp[j++]=0x01;//space
3149   2              FontWide+=2;
3150   2              FontWide+=1;    
3151   2              ResolutionProp[j++]=0x01;//space
3152   2              FontWide+=2;
3153   2              FontWide+=1;            
3154   2      }               
3155   1      //----------------------------------------------------------------
3156   1      
3157   1              
3158   1          ResolutionProp[j]=0x00;//End
3159   1      
3160   1      
3161   1      if(((HDisplay==640||HDisplay==720)&&(VDisplay==480||VDisplay==350||VDisplay==400))||(HDisplay==800&&VDispl
             -ay==600))
3162   1          FontWide=(FontWide)/12;
3163   1      else
3164   1          FontWide=(FontWide+11)/12;
3165   1      
3166   1          OSD_FONT_HI_ADDR_SET_BIT8();//0x100~0x1FF
3167   1          Osd_DynamicLoadFont(ResoulationAddress, ResolutionProp,j);
3168   1          OSD_FONT_HI_ADDR_CLR_TO_0();  
3169   1      
3170   1      
3171   1          ResolutionProp[0]=ResoulationAddress;
3172   1          ResolutionProp[1]=FontWide-1;
3173   1      
3174   1      
3175   1      
3176   1      
3177   1          OSD_TEXT_HI_ADDR_SET_BIT8(); //enable bit 8   
3178   1          Osd_DrawPropStr(18, TimingInfoYpos, ResolutionProp);
3179   1          OSD_TEXT_HI_ADDR_CLR_TO_0();
3180   1      
3181   1      
3182   1          return TRUE;
3183   1      }
3184          
3185          BYTE GetPrevItem(MenuItemType *menuItem)
3186          {
3187   1      
3188   1          signed char i=0;
3189   1      
3190   1          if (MenuItemIndex)
3191   1          {
3192   2              i= MenuItemIndex;
3193   2              for (; i >0;)  //poro:2008-09-03,for Envision OSD issue...
3194   2              {
3195   3      
3196   3                                      i--;
3197   3                              i=i%255;
3198   3                  #if INPUT_TYPE==INPUT_1D1H1DP||INPUT_TYPE==INPUT_1A2D||INPUT_TYPE==INPUT_1A1D1H||INPUT_TYPE ==
             - INPUT_1A2H1DP||INPUT_TYPE==INPUT_2A2D||INPUT_TYPE==INPUT_1A1H||INPUT_TYPE==INPUT_1A2H||INPUT_TYPE==INPUT_1A1D1H1DP||INP
             -UT_TYPE==INPUT_1A1D1DP ||INPUT_TYPE==INPUT_1A1H1DP|| INPUT_TYPE==INPUT_2H     //131113 fay
3199   3                  #if CHIP_ID>=CHIP_TSUMC
3200   3                  if ((menuItem[i].Flags &mibDVIDisable) && (SrcInputType == Input_Digital || SrcInputType == In
             -put_Digital2 || SrcInputType == Input_Displayport || SrcInputType == Input_Displayport3  ))
3201   3                  #else
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 54  

                          if ((menuItem[i].Flags &mibDVIDisable) && (SrcInputType == Input_Digital || SrcInputType == In
             -put_Digital2 || SrcInputType == Input_Displayport ))
                          #endif
3204   3                  #else
                          if (menuItem[i].Flags &mibDVIDisable && SrcInputType == Input_Digital)
                          #endif
3207   3                  {
3208   4                      continue;
3209   4                  }
3210   3                              #if CT_sRGB_ENABLE
                          if (menuItem[i].Flags &mibsRGBDisable && (UserPrefColorTemp == CTEMP_SRGB))
                          {
                              continue;
                          }
                                      #endif
3216   3                  if ( menuItem[i].Flags & mibUserColor && ( UserPrefColorTemp != CTEMP_USER )
3217   3      #if PresetMode_Enable
                      &&( UserPrefColorTemp_Preset!= CTEMP_USER )
              #endif
3220   3                              )//jeff 1112            //120215 Modify
3221   3                  {
3222   4                      continue;
3223   4                  }
3224   3                  if (menuItem[i].Flags &mibStdEnable && (UserPrefECOMode != ECO_Standard)
3225   3      #if PresetMode_Enable
                      &&UserPrefECOMode != ECO_Preset
              #endif
3228   3                              )
3229   3                  {
3230   4                      continue;
3231   4                  }
3232   3                  if (menuItem[i].Flags &mibDCRDisable && (UserPrefDcrMode))
3233   3                  {
3234   4                      continue;
3235   4                  }
3236   3      #if (ENABLE_DUAL_LINK)&&(ENABLE_RTE)            //130402 Modify
                          if (menuItem[i].Flags &mibODDisable && (Disabe_Overdrive_Item))     
                          {
                              continue;
                          }
              #endif
3242   3                  if (menuItem[i].Flags &mibFactoryItem && !FactoryModeFlag)
3243   3                  {
3244   4                      continue;
3245   4                  }
3246   3      
3247   3      
3248   3          #if Enable_Expansion
3249   3                      #if ENABLE_OVER_SCAN    //121228 Modify
                              //if( menuItem[i].Flags & mibExpansionDisable && INPUT_IS_NATIVE_TIMING())
                              #else
3252   3                  if( menuItem[i].Flags & mibExpansionDisable && ( !ExpansionFlag ) )
3253   3                  {
3254   4                      continue;
3255   4                  }
3256   3                      #endif
3257   3          #endif
3258   3      
3259   3      #if  LowBlueLightType == LowBlueLight_SharpFunc
                       if(( (MIB_LOWBLUEDISABLE & menuItem[i].Flags) && (UserPrefColorTemp!=CTEMP_LowBlue)))
                                      continue;
              #endif
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 55  

3263   3              #if Disable_VgaToAdjustVolume
                       if(( (mibAutioDisable & menuItem[i].Flags) && CURRENT_INPUT_IS_VGA()))
                                      continue;       
                       #endif 
3267   3      
3268   3      
3269   3                  if (menuItem[i].Flags &mibSelectable && !(menuItem[i].Flags &mibDrawValue))
3270   3                  {
3271   4                      return i;
3272   4                  }
3273   3      
3274   3              }
3275   2          }
3276   1      
3277   1             i= MenuItemCount;
3278   1      
3279   1         for ( ; i >= 0; )
3280   1          {
3281   2      
3282   2                 i--;
3283   2      
3284   2              #if INPUT_TYPE==INPUT_1D1H1DP||INPUT_TYPE==INPUT_1A2D||INPUT_TYPE==INPUT_1A1D1H||INPUT_TYPE==INPUT
             -_2A2D||INPUT_TYPE == INPUT_1A2H1DP||INPUT_TYPE==INPUT_1A1H||INPUT_TYPE==INPUT_1A2H||INPUT_TYPE==INPUT_1A1D1H1DP||INPUT_T
             -YPE==INPUT_1A1D1DP ||INPUT_TYPE==INPUT_1A1H1DP || INPUT_TYPE==INPUT_2H        //131113 fay
3285   2              #if CHIP_ID>=CHIP_TSUMC
3286   2              if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == Input
             -_Digital2 || SrcInputType == Input_Displayport|| SrcInputType == Input_Displayport3 ))
3287   2               #else
                      if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == Input
             -_Digital2 || SrcInputType == Input_Displayport ))
                      #endif
3290   2              #else
                      if (menuItem[i].Flags &mibDVIDisable && SrcInputType == Input_Digital)
                      #endif
3293   2              {
3294   3                  continue;
3295   3              }
3296   2      #if FreeSyncMenu_Enable
                       if (menuItem[i].Flags &mibFreeSyncDisable && (SrcInputType != Input_HDMI))
                      {
                          continue;
                      }
              #endif
3302   2      #if CT_sRGB_ENABLE
                      if (menuItem[i].Flags &mibsRGBDisable && (UserPrefColorTemp == CTEMP_SRGB))
                      {
                          continue;
                      }
              #endif
3308   2              if (menuItem[i].Flags &mibUserColor && ( UserPrefColorTemp != CTEMP_USER )
3309   2      #if PresetMode_Enable
                      &&( UserPrefColorTemp_Preset!= CTEMP_USER )
              #endif
3312   2                      )               //120215 Modify
3313   2              {
3314   3                  continue;
3315   3              }
3316   2              if (menuItem[i].Flags &mibStdEnable && (UserPrefECOMode != ECO_Standard)
3317   2      #if PresetMode_Enable
                      &&UserPrefECOMode != ECO_Preset
              #endif
3320   2                              )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 56  

3321   2              {
3322   3                  continue;
3323   3              }
3324   2              if (menuItem[i].Flags &mibDCRDisable && (UserPrefDcrMode))
3325   2              {
3326   3                  continue;
3327   3              }
3328   2      #if (ENABLE_DUAL_LINK)&&(ENABLE_RTE)            //130402 Modify
                      if (menuItem[i].Flags &mibODDisable && (Disabe_Overdrive_Item)) 
                      {
                          continue;
                      }
              #endif
3334   2              if (menuItem[i].Flags &mibFactoryItem && !FactoryModeFlag)
3335   2              {
3336   3                  continue;
3337   3              }
3338   2      
3339   2      
3340   2          #if Enable_Expansion
3341   2                      #if ENABLE_OVER_SCAN    //121228 Modify
                              //if( menuItem[i].Flags & mibExpansionDisable && INPUT_IS_NATIVE_TIMING())
                              #else
3344   2              if( menuItem[i].Flags & mibExpansionDisable && ( !ExpansionFlag ) )
3345   2              {
3346   3                  continue;
3347   3              }
3348   2                      #endif
3349   2          #endif
3350   2      
3351   2      #if  LowBlueLightType == LowBlueLight_SharpFunc
                       if(( (MIB_LOWBLUEDISABLE & menuItem[i].Flags) && (UserPrefColorTemp!=CTEMP_LowBlue)))
                                      continue;
              #endif
3355   2              #if Disable_VgaToAdjustVolume
                       if(( (mibAutioDisable & menuItem[i].Flags) && CURRENT_INPUT_IS_VGA()))
                                      continue;       
                       #endif 
3359   2      
3360   2      
3361   2              if (menuItem[i].Flags &mibSelectable && !(menuItem[i].Flags &mibDrawValue))
3362   2              {
3363   3                  return i;
3364   3              }
3365   2      
3366   2          }
3367   1          return MenuItemIndex;
3368   1      
3369   1      }
3370          
3371          BYTE GetNextItem(MenuItemType *menuItem)
3372          {
3373   1      
3374   1          BYTE i=0 ,firsttime ;
3375   1      
3376   1          if (MenuItemIndex < MenuItemCount - 1)
3377   1          {
3378   2              i = MenuItemIndex;
3379   2              for ( ; i < MenuItemCount-1;)
3380   2              {
3381   3      
3382   3                                      i++;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 57  

3383   3      
3384   3                  #if INPUT_TYPE==INPUT_1D1H1DP||INPUT_TYPE==INPUT_1A2D||INPUT_TYPE==INPUT_1A1D1H||INPUT_TYPE ==
             - INPUT_1A2H1DP||INPUT_TYPE==INPUT_2A2D||INPUT_TYPE==INPUT_1A1H||INPUT_TYPE==INPUT_1A2H||INPUT_TYPE==INPUT_1A1D1H1DP||INP
             -UT_TYPE==INPUT_1A1D1DP ||INPUT_TYPE==INPUT_1A1H1DP|| INPUT_TYPE==INPUT_2H     //131113 fay
3385   3                   #if CHIP_ID>=CHIP_TSUMC
3386   3                  if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == I
             -nput_Digital2 || SrcInputType == Input_Displayport || SrcInputType == Input_Displayport3))
3387   3                  #else
                          if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == I
             -nput_Digital2 || SrcInputType == Input_Displayport ))
                          #endif
3390   3                  #else
                          if (menuItem[i].Flags &mibDVIDisable && SrcInputType == Input_Digital)
                          #endif
3393   3                  {
3394   4                      continue;
3395   4                  }
3396   3                  #if FreeSyncMenu_Enable
                           if (menuItem[i].Flags &mibFreeSyncDisable && (SrcInputType != Input_HDMI))
                          {
                              continue;
                          }
                          #endif
3402   3                              #if CT_sRGB_ENABLE
                          if (menuItem[i].Flags &mibsRGBDisable && (UserPrefColorTemp == CTEMP_SRGB))
                          {
                              continue;
                          }
                                      #endif
3408   3                  if (menuItem[i].Flags &mibUserColor && ( UserPrefColorTemp != CTEMP_USER )
3409   3      #if PresetMode_Enable
                      &&( UserPrefColorTemp_Preset!= CTEMP_USER )
              #endif
3412   3                      )               //120215 Modify
3413   3                  {
3414   4                      continue;
3415   4                  }
3416   3                  if (menuItem[i].Flags &mibStdEnable && (UserPrefECOMode != ECO_Standard)
3417   3      #if PresetMode_Enable
                      &&UserPrefECOMode != ECO_Preset
              #endif
3420   3                              )
3421   3                  {
3422   4                      continue;
3423   4                  }
3424   3                  if (menuItem[i].Flags &mibDCRDisable && (UserPrefDcrMode))
3425   3                  {
3426   4                      continue;
3427   4                  }
3428   3      #if (ENABLE_DUAL_LINK)&&(ENABLE_RTE)            //130402 Modify
                          if (menuItem[i].Flags &mibODDisable && (Disabe_Overdrive_Item))     
                          {
                              continue;
                          }
              #endif
3434   3      
3435   3                  if (menuItem[i].Flags &mibFactoryItem && !FactoryModeFlag)
3436   3                  {
3437   4                      continue;
3438   4                  }
3439   3      
3440   3              #if Enable_Expansion
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 58  

3441   3                              #if ENABLE_OVER_SCAN    //121228 Modify
                                      //if( menuItem[i].Flags & mibExpansionDisable && INPUT_IS_NATIVE_TIMING())
                                      #else
3444   3                  if( menuItem[i].Flags & mibExpansionDisable && ( !ExpansionFlag ) )
3445   3                  {
3446   4                      continue;
3447   4                  }
3448   3                              #endif
3449   3              #endif
3450   3      
3451   3      #if  LowBlueLightType == LowBlueLight_SharpFunc
                       if(( (MIB_LOWBLUEDISABLE & menuItem[i].Flags) && (UserPrefColorTemp!=CTEMP_LowBlue)))
                                      continue;
              #endif
3455   3              #if Disable_VgaToAdjustVolume
                       if(( (mibAutioDisable & menuItem[i].Flags) && CURRENT_INPUT_IS_VGA()))
                                      continue;       
                       #endif 
3459   3      
3460   3      
3461   3                  if (menuItem[i].Flags &mibSelectable && !(menuItem[i].Flags &mibDrawValue))
3462   3                  {
3463   4                      return i;
3464   4                  }
3465   3              }
3466   2          }
3467   1      
3468   1                  i= 0;
3469   1      
3470   1              firsttime=1;
3471   1          for (; i < MenuItemIndex;)
3472   1          {
3473   2      
3474   2              {
3475   3                              if(!firsttime)
3476   3                              i++;
3477   3                  else
3478   3                          firsttime=0;
3479   3              }
3480   2              #if INPUT_TYPE==INPUT_1D1H1DP||INPUT_TYPE==INPUT_1A2D||INPUT_TYPE==INPUT_1A1D1H||INPUT_TYPE == INP
             -UT_1A2H1DP||INPUT_TYPE==INPUT_2A2D||INPUT_TYPE==INPUT_1A1H||INPUT_TYPE==INPUT_1A2H||INPUT_TYPE==INPUT_1A1D1H1DP||INPUT_T
             -YPE==INPUT_1A1D1DP||INPUT_TYPE==INPUT_1A1H1DP || INPUT_TYPE==INPUT_2H //131113 fay
3481   2              #if CHIP_ID>=CHIP_TSUMC
3482   2              if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == Input
             -_Digital2 || SrcInputType == Input_Displayport|| SrcInputType == Input_Displayport3 ))
3483   2              #else
                      if ((menuItem[i].Flags &mibDVIDisable) && ( SrcInputType == Input_Digital || SrcInputType == Input
             -_Digital2 || SrcInputType == Input_Displayport ))
                      #endif
3486   2              #else
                      if (menuItem[i].Flags &mibDVIDisable && SrcInputType == Input_Digital)
                      #endif
3489   2              {
3490   3                  continue;
3491   3              }
3492   2                      #if CT_sRGB_ENABLE
                      if (menuItem[i].Flags &mibsRGBDisable && (UserPrefColorTemp == CTEMP_SRGB))
                      {
                          continue;
                      }
                              #endif
3498   2              if (menuItem[i].Flags &mibUserColor && (( UserPrefColorTemp != CTEMP_USER )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 59  

3499   2      #if PresetMode_Enable
                      &&( UserPrefColorTemp_Preset!= CTEMP_USER )
              #endif
3502   2                      ))              //120215 Modify
3503   2              {
3504   3                  continue;
3505   3              }
3506   2              if (menuItem[i].Flags &mibStdEnable && (UserPrefECOMode != ECO_Standard)
3507   2      #if PresetMode_Enable
                      &&UserPrefECOMode != ECO_Preset
              #endif
3510   2      )
3511   2              {
3512   3                  continue;
3513   3              }
3514   2              if (menuItem[i].Flags &mibDCRDisable && (UserPrefDcrMode))
3515   2              {
3516   3                  continue;
3517   3              }
3518   2      #if (ENABLE_DUAL_LINK)&&(ENABLE_RTE)            //130402 Modify
                      if (menuItem[i].Flags &mibODDisable && (Disabe_Overdrive_Item)) 
                      {
                          continue;
                      }
              #endif
3524   2              if (menuItem[i].Flags &mibFactoryItem && !FactoryModeFlag)
3525   2              {
3526   3                  continue;
3527   3              }
3528   2      
3529   2          #if Enable_Expansion
3530   2                      #if ENABLE_OVER_SCAN    //121228 Modify
                              //if( menuItem[i].Flags & mibExpansionDisable && INPUT_IS_NATIVE_TIMING())
                              #else
3533   2              if( menuItem[i].Flags & mibExpansionDisable && ( !ExpansionFlag ) )
3534   2              {
3535   3                  continue;
3536   3              }
3537   2                      #endif
3538   2          #endif
3539   2      
3540   2      #if  LowBlueLightType == LowBlueLight_SharpFunc
                       if(( (MIB_LOWBLUEDISABLE & menuItem[i].Flags) && (UserPrefColorTemp!=CTEMP_LowBlue)))
                                      continue;
              #endif
3544   2              #if Disable_VgaToAdjustVolume
                       if(( (mibAutioDisable & menuItem[i].Flags) && CURRENT_INPUT_IS_VGA()))
                                      continue;       
                       #endif 
3548   2      
3549   2                      
3550   2              if (menuItem[i].Flags &mibSelectable && !(menuItem[i].Flags &mibDrawValue))
3551   2              {
3552   3                  return i;
3553   3              }
3554   2          }
3555   1          return MenuItemIndex;
3556   1      
3557   1      }
3558          
3559          
3560          
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 60  

3561          #if 1//20121105 Move MENUTEMP.c
3562          // menuPageIndex => prev page index
3563          // MenuPageIndex => current page index
3564          #if 1
3565          BYTE GetMenuItemIndex(BYTE menuPageIndex)
3566          {
3567   1              //ITEM
3568   1          if( MenuPageIndex == MainMenu )
3569   1          {
3570   2              if( menuPageIndex == OSD_BriContrastMenu )
3571   2              {
3572   3                  return MAIN_BriContrast_ITEM;
3573   3              }
3574   2              else if( menuPageIndex == PictureMenu )
3575   2              {
3576   3                  return MAIN_Picture_ITEM;
3577   3              }
3578   2              else if( menuPageIndex == RGBColorMenu )
3579   2              {
3580   3                  return MAIN_RGBColor_ITEM;
3581   3              }
3582   2              else if( menuPageIndex == OsdMenu )
3583   2              {
3584   3                  return MAIN_Osd_ITEM;
3585   3              }
3586   2              else if( menuPageIndex == SettingMenu )
3587   2              {
3588   3                  return MAIN_Setting_ITEM;
3589   3              }
3590   2              else if( menuPageIndex == OSD_MiscMenu )
3591   2              {
3592   3                  return MAIN_Misc_ITEM;
3593   3              }
3594   2                      else if( menuPageIndex == LanguageMenu )
3595   2              {
3596   3                  return MAIN_Setting_ITEM;
3597   3              }       
3598   2      
3599   2          }
3600   1              //ITEM
3601   1          else if( MenuPageIndex == OSD_BriContrastMenu )
3602   1          {
3603   2              if( UserPrefDcrMode )
3604   2              {
3605   3                      #if ENABLE_RTE && !PresetMode_Enable//120502 Modify
                              if( menuPageIndex == OverdriveMenu)
                                  return BriContrast_Overdrive_ITEM;
                                      else
                              #endif
3610   3                          return BriContrast_DCR_ITEM;                        //110304 Modify
3611   3              }
3612   2                      #if CT_sRGB_ENABLE
                      else if( menuPageIndex == MainMenu && UserPrefColorTemp == CTEMP_SRGB )
                      {
                          return BriContrast_ECO_ITEM;                        //110301 Modify
                      }
                              #endif
3618   2              else if( menuPageIndex == MainMenu && UserPrefECOMode != ECO_Standard 
3619   2                      #if PresetMode_Enable
                                      &&UserPrefECOMode != ECO_Preset
                              #endif
3622   2                      )
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 61  

3623   2              {
3624   3                  return BriContrast_ECO_ITEM;
3625   3              }
3626   2              else if( menuPageIndex == ECOMenu )
3627   2              {
3628   3                  return BriContrast_ECO_ITEM;
3629   3              }
3630   2                      #if Enable_Gamma
                              #if PresetMode_Enable
                      else if( menuPageIndex == GammaMenu )
                      {
                          return BriContrast_DCR_ITEM;
                      }          
                              #else
                      else if( menuPageIndex == GammaMenu )
                      {
                          return BriContrast_GAMMA_ITEM;
                      }
                              #endif  
                              #endif
3643   2              else if( menuPageIndex == DCRMenu )
3644   2              {
3645   3                  return BriContrast_DCR_ITEM;
3646   3              }
3647   2              #if ENABLE_RTE  && !PresetMode_Enable
                          else if( menuPageIndex == OverdriveMenu )
                              {
                                      return BriContrast_Overdrive_ITEM;
                              }
                      #endif
3653   2      
3654   2              else if( menuPageIndex == BrightnessMenu )
3655   2              {
3656   3                  return BriContrast_BRIGHTNESS_ITEM;
3657   3              }
3658   2                      else if( menuPageIndex == ContrastMenu )
3659   2              {
3660   3                  return BriContrast_CONTRAST_ITEM;
3661   3              }       
3662   2          }
3663   1          else if( MenuPageIndex == PictureMenu )
3664   1          {
3665   2          #if Enable_Func_AdjExpansion
3666   2              #if CHIP_ID>=CHIP_TSUMC
3667   2              if( SrcInputType == Input_Digital || SrcInputType == Input_Digital2 || SrcInputType == Input_Displ
             -ayport|| SrcInputType == Input_Displayport3)  //121128 Modify
3668   2              #else
                      if( SrcInputType == Input_Digital || SrcInputType == Input_Digital2 || SrcInputType == Input_Displ
             -ayport )  //121128 Modify
                      #endif
3671   2              {
3672   3                  return Picture_IMAGERATIO_ITEM;
3673   3              }
3674   2              else
3675   2          #endif
3676   2              {
3677   3                  if( menuPageIndex == HPositionMenu )
3678   3                  {
3679   4                      return Picture_HPOSITION_ITEM;
3680   4                  }
3681   3                  else if( menuPageIndex == VPositionMenu )
3682   3                  {
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 62  

3683   4                      return Picture_VPOSITION_ITEM;
3684   4                  }
3685   3                   else if( menuPageIndex == ClockMenu )
3686   3                  {
3687   4                      return Picture_CLOCK_ITEM;
3688   4                  }           
3689   3                  else if( menuPageIndex == FocusMenu )
3690   3                  {
3691   4                      return Picture_PHASE_ITEM;
3692   4                  }
3693   3      #if Enable_Func_AdjExpansion
3694   3              else if( menuPageIndex == ExpansionMenu )
3695   3              {
3696   4                  return Picture_IMAGERATIO_ITEM;
3697   4              }
3698   3      #endif                  
3699   3              }
3700   2          }
3701   1          else if( MenuPageIndex == RGBColorMenu )
3702   1          {
3703   2               if( menuPageIndex == RedMenu )
3704   2              {
3705   3                  return RGB_Red_Item;
3706   3              }
3707   2              else if( menuPageIndex == GreenMenu )
3708   2              {
3709   3                  return RGB_Green_Item;
3710   3              }
3711   2              else if( menuPageIndex == BlueMenu )
3712   2              {
3713   3                  return RGB_Blue_Item;
3714   3              }
3715   2                      #if LowBlueLightType==LowBlueLight_ColorTemp || LowBlueLightType==LowBlueLight_SharpFunc
                              else if( menuPageIndex == LowBlueLightMenu )
                      {
                          return RGB_LowBlueLigth_Item;
                      }
                              #endif
3721   2          }
3722   1          else if( MenuPageIndex == OsdMenu )
3723   1          {
3724   2               if( menuPageIndex == LanguageMenu )
3725   2              {
3726   3                  return OSD_LANGUAGE_ITEM;
3727   3              }    
3728   2      #if OsdAdjustHVPos_Enable    
3729   2              else if( menuPageIndex == OsdHPositionMenu )
3730   2              {
3731   3                  return OSD_HPOSITION_ITEM;
3732   3              }
3733   2              else if( menuPageIndex == OsdVPositionMenu )
3734   2              {
3735   3                  return OSD_VPOSITION_ITEM;
3736   3              }
3737   2      #endif          
3738   2              else if( menuPageIndex == OsdTimeOutMenu )
3739   2              {
3740   3                  return OSD_TIMEOUT_ITEM;
3741   3              }
3742   2              else if( menuPageIndex == TransparenceMenu )
3743   2              {
3744   3                  return OSD_TRANSPARENCE_ITEM;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 63  

3745   3              }   
3746   2          }
3747   1      
3748   1          else if( MenuPageIndex == SettingMenu )
3749   1          {
3750   2          if(SrcInputType!=Input_VGA)
3751   2                      return Setting_RESTR_ITEM;
3752   2       #ifdef OffPower            
                  else if( menuPageIndex == OffTimerMenu )
                  {
                      return Setting_OffPower_ITEM;
                  } 
              #endif  
3758   2      #if AboutDSUBFunc_Enable
3759   2              else
3760   2                      return Setting_AUTOCONFIG_ITEM;
3761   2      #endif  
3762   2          }  
3763   1      #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)    
3764   1          else if( MenuPageIndex == InputSelectMenu )
3765   1          {
3766   2      #if ENABLE_AutoDetech    
                  #if INPUT_TYPE == INPUT_2H||INPUT_TYPE == INPUT_1D1H1DP
                      if (UserPrefInputSelectType == INPUT_PRIORITY_AUTO)
                              return 0;
                      #else
                      if (UserPrefInputSelectType == INPUT_PRIORITY_AUTO)
                              return 0;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_VGA)
                              return 1;
                      #endif
              
              #if INPUT_TYPE == INPUT_1A1H  //110424 Modify
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                              return 2;
              #elif INPUT_TYPE == INPUT_1A2H
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                      {
                              return 2;
                      }
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                      {
                      return 3;
                      }
              #elif INPUT_TYPE == INPUT_2H
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                              return 1;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                              return 2;
              #elif INPUT_TYPE == INPUT_1A1D1H
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                              return 2;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                              return 3;
              #elif INPUT_TYPE == INPUT_1A1D1DP       //130924 xiandi
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                              return 1;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                              return 2;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DP)
                              return 3;
              #elif INPUT_TYPE == INPUT_1D1H1DP       //130924 xiandi
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 64  

                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                          return 1;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                          return 2;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DP)
                          return 3;
              #elif INPUT_TYPE == INPUT_1A1H1DP       //130924 xiandi
                              else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                                      return 2;
                              else if (UserPrefInputSelectType == INPUT_PRIORITY_DP)
                                      return 3;
              
              #elif INPUT_TYPE == INPUT_1A1DP //20151126 Alpha
                              else if (UserPrefInputSelectType == INPUT_PRIORITY_DP)
                                      return 2;
              #elif (INPUT_TYPE == INPUT_1A1D1H1DP||INPUT_TYPE == INPUT_1A2H1DP)                              //130105_22 Henry
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                              return 2;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_HDMI)
                              return 3;
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DP)
                              return 4;
              #elif INPUT_TYPE == INPUT_1A1D                                          //130128 Modify
                      else if (UserPrefInputSelectType == INPUT_PRIORITY_DVI)
                              return 2;
              #endif
              
              
              
              #else
3837   2      
3838   2          #if ENABLE_VGA
3839   2              
3840   2              if (UserPrefInputType == INPUT_PRIORITY_VGA)
3841   2                      return 0;
3842   2              #endif
3843   2      
3844   2      #if INPUT_TYPE == INPUT_1A1H  //110424 Modify
3845   2              else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
3846   2                      return 1;
3847   2      #elif INPUT_TYPE == INPUT_1A2H
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                      {
                              return 1;
                      }
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                      {
                      return 2;
                      }
              #elif INPUT_TYPE == INPUT_2H
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                              return 0;
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                              return 1;
              #elif INPUT_TYPE == INPUT_1A1D1H
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                              return 1;
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                              return 2;
              #elif INPUT_TYPE == INPUT_1A1D1DP       //130924 xiandi
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                              return 1;
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 65  

                      else if (UserPrefInputType == INPUT_PRIORITY_DP)
                              return 2;
              #elif INPUT_TYPE == INPUT_1D1H1DP       //130924 xiandi
                        if (UserPrefInputType == INPUT_PRIORITY_DVI)
                          return 0;
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                          return 1;
                      else if (UserPrefInputType == INPUT_PRIORITY_DP)
                          return 2;
              #elif INPUT_TYPE == INPUT_1A1H1DP       //130924 xiandi
                              else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                                      return 1;
                              else if (UserPrefInputType == INPUT_PRIORITY_DP)
                                      return 2;
              
              #elif INPUT_TYPE == INPUT_1A1DP //20151126 Alpha
                              else if (UserPrefInputType == INPUT_PRIORITY_DP)
                                      return 2;
              #elif (INPUT_TYPE == INPUT_1A1D1H1DP)                           //130105_22 Henry
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                              return 1;
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                              return 2;
                      else if (UserPrefInputType == INPUT_PRIORITY_DP)
                              return 3;
              #elif (INPUT_TYPE == INPUT_1A2H1DP)                             //130105_22 Henry
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI)
                              return 1;
                      else if (UserPrefInputType == INPUT_PRIORITY_HDMI2ND)
                              return 2;
                      else if (UserPrefInputType == INPUT_PRIORITY_DP)
                              return 3;       
              #elif INPUT_TYPE == INPUT_1A1D                                          //130128 Modify
                      else if (UserPrefInputType == INPUT_PRIORITY_DVI)
                              return 1;
              #endif
3905   2      
3906   2      #endif
3907   2          }
3908   1      #endif
3909   1      else if( MenuPageIndex == OSD_MiscMenu )
3910   1          {
3911   2           #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)       
3912   2              if( menuPageIndex == InputSelectMenu )
3913   2              {
3914   3                  return Misc_InputSource_ITEM;
3915   3              }
3916   2              #endif
3917   2      #if (INPUT_TYPE!=INPUT_1A) && (INPUT_TYPE!=INPUT_1H)
3918   2      #if AudioFunc   
3919   2      #if EANBLE_MUTE_ON_OFF   
3920   2      
3921   2              else if( menuPageIndex == MuteMenu )
3922   2              {
3923   3                  return Misc_Mute_ITEM;
3924   3              }
3925   2      #endif          
3926   2              else if( menuPageIndex == VolumeMenu )
3927   2              {
3928   3                  return Misc_Volume_ITEM;
3929   3              }
3930   2      #endif
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 66  

3931   2      #else
              #if AudioFunc   
              #if EANBLE_MUTE_ON_OFF   
              
                      if( menuPageIndex == MuteMenu )
                      {
                          return Misc_Mute_ITEM;
                      }
              #endif          
                      else if( menuPageIndex == VolumeMenu )
                      {
                          return Misc_Volume_ITEM;
                      }
              #endif
              
              #endif
3947   2        #if Enable_Adjust_SharpnessMenu
                      else if( menuPageIndex == SharpnessMenu )
                      {
                          return Misc_Sharpness_ITEM;
                      }
              #endif
3953   2              #if ENABLE_RTE  && PresetMode_Enable
                       else if( menuPageIndex == OverdriveMenu )
                       {
                           return Misc_Overdrive_ITEM;
                       }
                      #endif
3959   2      #if  DDCCI_ENABLE && DDCCCIMenu_Enable
                      else if( menuPageIndex == DDCCIMenu )
                      {
                          return Misc_DDCCI_ITEM;
                      }
              #endif
3965   2      #if (LowBlueLightType==LowBlueLight_Misc_Guage)||(LowBlueLightType==LowBlueLight_Misc_Group)
3966   2              else if( menuPageIndex == LowBlueLightMenu)
3967   2              {
3968   3                  return Misc_LowBlueLigth_Item;
3969   3              }
3970   2      #endif
3971   2      #if  FreeSyncMenu_Enable
              
                      else if( menuPageIndex == FreeSyncMenu )
                      {
                          return Misc_FreeSync_ITEM;
                      } 
              #endif          
3978   2          }
3979   1      #if !AdjustLanguageFunction
              else if(MenuPageIndex == LanguageMenu)
              {
                              return UserPrefLanguage;
              }
              #endif
3985   1          return 0;
3986   1      }
3987          #endif
3988          #endif
3989          
3990          #if OsdHelpKeyType == OsdHelpKey_Right
              #define underBlankFontWide              1
              #else
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 67  

3993          #define underBlankFontWide              3
3994          #endif
3995          void DrawOsdBackGround(void)
3996          {
3997   1              BYTE i;
3998   1      
3999   1          if ( MenuPageIndex == MainMenu )
4000   1          {
4001   2                  Osd_SetTextMonoColor(0x00, 0x0E);
4002   2                      for (i = 0; i <= OsdWindowHeight-1; i++)
4003   2                      {
4004   3                        Osd_DrawContinuesChar( 0 , i , SpaceFont , OsdWindowWidth);           
4005   3                      }
4006   2      
4007   2                      //draw Four Cornu
4008   2                      Osd_SetTextMonoColor(0x06,CPC_TranColor);
4009   2                      Osd_DrawCharDirect(0, 0, MonoFrame_LT);
4010   2                      Osd_DrawCharDirect(CurrentMenu.XSize-1, 0, MonoFrame_RT);
4011   2                      #if OsdHelpKeyType == OsdHelpKey_Right
                              #else
4013   2                      Osd_DrawCharDirect(0, CurrentMenu.YSize-1, MonoFrame_LD);
4014   2                      Osd_DrawCharDirect(CurrentMenu.XSize-1, CurrentMenu.YSize-1, MonoFrame_RD);
4015   2                      #endif
4016   2      
4017   2                      //draw frame            
4018   2                      Osd_SetTextMonoColor(0,2);
4019   2                      for(i=1;i<=CurrentMenu.XSize-2;i++)
4020   2                      {
4021   3                              Osd_DrawCharDirect(i, 0, SpaceFont);
4022   3                              Osd_DrawCharDirect(i, 1, SpaceFont);
4023   3                      }
4024   2                      Osd_DrawCharDirect(0, 1, SpaceFont);
4025   2                      Osd_DrawCharDirect(CurrentMenu.XSize-1, 1, SpaceFont);
4026   2      
4027   2                      //draw Top and Bottom& left & right line
4028   2                      Osd_SetTextMonoColor(5,2);
4029   2                      for(i=0;i<CurrentMenu.XSize;i++)
4030   2                      {
4031   3                              Osd_DrawCharDirect(i, 2, MenuFrame_TopSide);
4032   3                      }
4033   2                      for(i=0;i<CurrentMenu.XSize;i++)
4034   2                      {
4035   3                              Osd_DrawCharDirect(i, CurrentMenu.YSize-underBlankFontWide, MenuFrame_BottomSide);
4036   3                      }
4037   2      
4038   2                      Osd_SetTextMonoColor(5,7);
4039   2                      for(i=3;i<CurrentMenu.YSize-underBlankFontWide;i++)
4040   2                      {
4041   3                              Osd_DrawCharDirect(5, i, MenuFrame_LeftSide);
4042   3                      }
4043   2                      #if OsdHelpKeyType == OsdHelpKey_Right
                              for(i=3;i<CurrentMenu.YSize-underBlankFontWide;i++)
                              {
                                      Osd_DrawCharDirect(CurrentMenu.XSize-5, i, MenuFrame_RightSide);
                              }       
                              Osd_SetTextMonoColor(2,2);
                              for(i=3;i<CurrentMenu.YSize-underBlankFontWide;i++)
                              {
                                      Osd_DrawCharDirect(CurrentMenu.XSize-4, i, SpaceFont);
                                      Osd_DrawCharDirect(CurrentMenu.XSize-3, i, SpaceFont);
                                      Osd_DrawCharDirect(CurrentMenu.XSize-2, i, SpaceFont);
                                      Osd_DrawCharDirect(CurrentMenu.XSize-1, i, SpaceFont);
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 68  

                              }
                              #else
4057   2                      for(i=3;i<CurrentMenu.YSize-underBlankFontWide;i++)
4058   2                      {
4059   3                              Osd_DrawCharDirect(CurrentMenu.XSize-1, i, MenuFrame_RightSide);
4060   3                      }
4061   2                      #endif
4062   2      
4063   2                      
4064   2                      Osd_SetTextMonoColor(0,2);
4065   2                      #if OsdHelpKeyType == OsdHelpKey_Right
              
                              #else
4068   2                      for(i=1;i<=CurrentMenu.XSize-2;i++)
4069   2                      {
4070   3                              Osd_DrawCharDirect(i, CurrentMenu.YSize-2, SpaceFont);
4071   3                              Osd_DrawCharDirect(i, CurrentMenu.YSize-1, SpaceFont);
4072   3                      }
4073   2                      Osd_DrawCharDirect(0, CurrentMenu.YSize-2, SpaceFont);
4074   2                      Osd_DrawCharDirect(CurrentMenu.XSize-1, CurrentMenu.YSize-2, SpaceFont);        
4075   2                      #endif
4076   2      
4077   2      
4078   2      #if     OsdHelpKeyType == OsdHelpKey_Under
                              UpdataHelyKeyShowInMenu();
                              Osd_SetTextMonoColor(7,2);
                              Osd_DrawCharDirect(13, CurrentMenu.YSize-2, 0x11);      
                              Osd_DrawCharDirect(14, CurrentMenu.YSize-2, 0x12);      
                              
                              Osd_DrawCharDirect(16, CurrentMenu.YSize-2, 0x13);      
                              Osd_DrawCharDirect(17, CurrentMenu.YSize-2, 0x14);      
                              Osd_DrawCharDirect(18, CurrentMenu.YSize-2, 0x15);      
                              
                              Osd_DrawCharDirect(20, CurrentMenu.YSize-2, 0x16);      
                              Osd_DrawCharDirect(21, CurrentMenu.YSize-2, 0x17);      
              
                              Osd_DrawCharDirect(23, CurrentMenu.YSize-2, 0x18);      
                              Osd_DrawCharDirect(24, CurrentMenu.YSize-2, 0x19);              
                              Osd_DrawCharDirect(25, CurrentMenu.YSize-2, 0x1A);      
              #elif OsdHelpKeyType ==  OsdHelpKey_Right
                              UpdataHelyKeyShowInMenu();
                              Osd_SetTextMonoColor(7,2);
                              OSD_TEXT_HI_ADDR_SET_BIT8();
              
              #if ModelName == MODEL_HS275HFB
                              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-12, 0x80);   
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-12, 0x81);                   
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-11, 0x82);   
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-11, 0x83);   
              
                              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-9, 0x84);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-9, 0x85);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-8, 0x86);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-8, 0x87);    
              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-6, 0x88);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-6, 0x89);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-5, 0x8A);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-5, 0x8B);    
              
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 69  

                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-4, 0x8C);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-4, 0x8D);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-3, 0x8E);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-3, 0x8F);    
              
              #elif ModelName == MODEL_HS225HFB
              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-13, 0x80);   
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-13, 0x81);                   
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-12, 0x82);   
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-12, 0x83);   
              
                              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-9, 0x84);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-9, 0x85);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-8, 0x86);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-8, 0x87);    
              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-6, 0x88);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-6, 0x89);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-5, 0x8A);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-5, 0x8B);    
              
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-3, 0x8C);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-3, 0x8D);    
                              Osd_DrawCharDirect(0x2A, CurrentMenu.YSize-2, 0x8E);    
                              Osd_DrawCharDirect(0x2B, CurrentMenu.YSize-2, 0x8F);            
              
              #endif
                              
                              OSD_TEXT_HI_ADDR_CLR_TO_0();
              
              #endif
4150   2      
4151   2              
4152   2         }
4153   1          else if ( (MenuPageIndex >= HotKeyECOMenu && MenuPageIndex <= AutoMenu)
4154   1                  || MenuPageIndex == InputInfoMenu
4155   1                  #ifdef OffPower  
                          || MenuPageIndex == OffPowerWarningMenu//20110310-98
                          #endif
4158   1                  || MenuPageIndex < RootMenu )
4159   1          {
4160   2                      Osd_SetTextMonoColor(0x00, 0x0E);       
4161   2                      for (i = 0; i <= OsdWindowHeight-1; i++)
4162   2                      {
4163   3                              Osd_DrawContinuesChar( 0 , i , SpaceFont , OsdWindowWidth);             
4164   3                      }
4165   2                        
4166   2              Osd_SetTextMonoColor(0x06,CPC_TranColor);
4167   2              Osd_DrawCharDirect( 0, 0, MonoFrame_LT );
4168   2              Osd_DrawCharDirect( OsdWindowWidth- 1, 0, MonoFrame_RT );
4169   2              Osd_DrawCharDirect( 0, OsdWindowHeight - 1, MonoFrame_LD );
4170   2              Osd_DrawCharDirect( OsdWindowWidth- 1, OsdWindowHeight - 1, MonoFrame_RD );
4171   2      
4172   2      
4173   2              Osd_SetTextMonoColor(0,2);      
4174   2              for(i=1;i<=CurrentMenu.XSize-2;i++)
4175   2              {
4176   3                      Osd_DrawCharDirect(i, 0, SpaceFont);
4177   3                      Osd_DrawCharDirect(i, CurrentMenu.YSize-1, SpaceFont);
4178   3              }
C51 COMPILER V9.01   MENU                                                                  03/09/2023 15:39:01 PAGE 70  

4179   2      
4180   2      
4181   2              Osd_SetTextMonoColor(1,7);      
4182   2              Osd_DrawCharDirect(0,1,AutoMenuFrameLeftSide_1);
4183   2              Osd_DrawCharDirect(0,CurrentMenu.YSize-2,AutoMenuFrameLeftSide_3);
4184   2              Osd_DrawCharDirect(CurrentMenu.XSize-1,1,AutoMenuFrameRightSide_1);
4185   2              Osd_DrawCharDirect(CurrentMenu.XSize-1,CurrentMenu.YSize-2,AutoMenuFrameRightSide_3);
4186   2              for(i=2;i<=CurrentMenu.YSize-3;i++)
4187   2              {
4188   3                      Osd_DrawCharDirect(0,i,AutoMenuFrameLeftSide_2);
4189   3                      Osd_DrawCharDirect(CurrentMenu.XSize-1,i,AutoMenuFrameRightSide_2);
4190   3              }
4191   2              for(i=1;i<=CurrentMenu.XSize-2;i++)
4192   2              {
4193   3                      Osd_DrawCharDirect(i,1,AutoMenuFrameMide_Top);
4194   3                      Osd_DrawCharDirect(i,CurrentMenu.YSize-2,AutoMenuFrameMide_Bottom);
4195   3              }       
4196   2          }
4197   1              
4198   1      
4199   1      }
4200          
4201          
4202          
4203          
4204          
4205          
4206          
4207          
4208          
4209          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =  12468    ----
   CONSTANT SIZE    =   5353    ----
   XDATA SIZE       =      5      59
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      58
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
