C51 COMPILER V9.01   COMBOAPP                                                              03/09/2023 15:39:24 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE COMBOAPP
OBJECT MODULE PLACED IN .\obj\ComboApp.obj
COMPILER INVOKED BY: D:\Keil4\C51\BIN\C51.EXE ..\..\KERNEL\SCALER\ComboApp.c OPTIMIZE(SIZE) BROWSE INCDIR(..\..\DRIVER\I
                    -NC;..\..\KERNEL\SCALER\INC;..\..\KERNEL\SYSTEM\INC;..\..\LIB\INC;..\..\PANEL\INC;..\..\BOARD;..\..\DRIVER\INC;..\..\KERN
                    -EL\SYSTEM\INC\AOC2011;..\..\DRIVER\extDEVICE\INC;..\..\MODEL;..\..\CONFIG;..\..\PANEL;..\..\UI\F_LOGO\INC;..\..\UI\HkcOs
                    -d\INC) DEFINE(ModelName=JRY_TESTBOARD_C_BOARD) DEBUG OBJECTEXTEND PRINT(.\list\ComboApp.lst) OBJECT(.\obj\ComboApp.obj)

line level    source

   1          #define _ComboAPP_C_
   2          #if 1
   3          #include <math.h>
   4          #include "types.h"
   5          #include "board.h"
   6          #include "ms_reg.h"
   7          #include "global.h"
   8          #include "Mcu.h"
   9          //#include "panel.h"
  10          #include "adjust.h"
  11          //#include "msADC.h"
  12          #include "ms_rwreg.h"
  13          #include "debug.h"
  14          #include "Common.h"
  15          #include "misc.h"
  16          #include "ddc.h"
  17          #include "power.h"
  18          #include "detect.h"
  19          #include "msOsd.h"
  20          #include "gamma.h"
  21          //#include "extlib.h"
  22          #include "menu.h"
  23          #include "menudef.h"
  24          #include "menufunc.h"
  25          #include "msflash.h"
  26          //#include "msid_v1.h"
  27          #include "drvgpio.h"
  28          #include "drvadc.h"
  29          #include "msEread.h"
  30          #if ENABLE_RTE
              #include "msovd.h"
              #endif
  33          #if ENABLE_FREESYNC
              #include "drvDPRxApp.h"
              #endif
  36          #if (MS_PM)
  37          #include "Ms_PM.h"
  38          #endif
  39          #include "MsHDCP.h"
  40          #include "MsDLC.h"
  41          #include "MsACE.h"
  42          #include "Userpref.h"
  43          #include "panel.h"
  44          #if ENABLE_HDMI
  45          #include "msHDMI.h"
  46          #include "msHDMIACE.h"
  47          #endif
  48          
  49          
  50          #if ENABLE_DP_INPUT
              #include "drvDPRxApp.h"
              #endif
C51 COMPILER V9.01   COMBOAPP                                                              03/09/2023 15:39:24 PAGE 2   

  53          
  54          #include "drvmStar.h"
  55          
  56          #define  Combo_DEBUG  1
  57          
  58          #if (Combo_DEBUG&&ENABLE_DEBUG)
              #define Combo_printData(str, value)   printData(str, value)
              #define Combo_printMsg(str)               printMsg(str)
              #else
  62          #define Combo_printData(str, value)
  63          #define Combo_printMsg(str)
  64          #endif
  65          
  66          
  67          #if (ENABLE_FREESYNC)
              //**************************************************************************
              //  [Function Name]:
              //                  msAPI_combo_IPGetDDRFlag_ISR()
              //  [Description]
              //                  msAPI_combo_IPGetDDRFlag_ISR
              //  [Arguments]:
              //
              //  [Return]:
              //
              //**************************************************************************
              Bool msAPI_combo_IPGetDDRFlag_ISR()
              {
                  Bool ucflag= FALSE;
              
                  if(CURRENT_INPUT_IS_DISPLAYPORT())
                  {
                      #if (ENABLE_DP_INPUT)
                        ucflag = DPRxGetDRRFlag_ISR();       
                      #endif
                  }
                  else if(CURRENT_INPUT_IS_HDMI())
                  {
                       #if (ENABLE_HDMI)
                      ucflag = mstar_HDMIGetFreeSyncFlag();
                      #endif
                  }
              
                  return ucflag;
              }
              
              //**************************************************************************
              //  [Function Name]:
              //                  msAPI_combo_IPGetDDRFlag()
              //  [Description]
              //                  msAPI_combo_IPGetDDRFlag
              //  [Arguments]:
              //
              //  [Return]:
              //
              //**************************************************************************
              Bool msAPI_combo_IPGetDDRFlag()
              {
                  Bool ucflag= FALSE;
              
                   if(CURRENT_INPUT_IS_HDMI())
                  {
                      #if (ENABLE_HDMI)
C51 COMPILER V9.01   COMBOAPP                                                              03/09/2023 15:39:24 PAGE 3   

                      ucflag = mstar_HDMIGetFreeSyncFlag();
                      #endif
                  }
                  else if(CURRENT_INPUT_IS_DISPLAYPORT())
                  {
                      #if (ENABLE_DP_INPUT)
                      ucflag = DPRxGetDRRFlag();
                      #endif
                  }
              
              
                  return ucflag;
              }
              //**************************************************************************
              //  [Function Name]:
              //                  msAPI_combo_IPGetDDRFlag()
              //  [Description]
              //                  msAPI_combo_IPGetDDRFlag
              //  [Arguments]:
              //
              //  [Return]:
              //
              //**************************************************************************
              #if FreeSyncMenu_Enable
              extern void drvOSD_FrameColorRGB(BYTE u8Red,BYTE u8Green,BYTE u8Blue);
              extern void drvOSD_FrameColorEnable(Bool bEnable);
              
              void msAPI_combo_IPEnableDDRFlag(Bool Enable)
              {
              
                  Enable = Enable;
              
                  #if (ENABLE_DP_INPUT)
                  if(CURRENT_INPUT_IS_DISPLAYPORT())
                  {
                      DPRxEnableDRRFunction(Enable);
                      DPRxHPDDisable();                                                                           // HPD
             - ouput enable and set Low
                      ForceDelay1ms( 100 );
                      DPRxHPDEnable();
                  }
                  #endif
                      
                   if(CURRENT_INPUT_IS_HDMI())
                  {
              
                              //msEnableHDCP();
                              SrcFlags |= SyncLoss;
                          Set_InputTimingChangeFlag(); // setup mode failed
                          //mStar_SetupFreeRunMode(); // setup freerun mode
                          #if ENABLE_CABLE_5V_EDID && ENABLE_HDMI && ENABLE_FREESYNC  
                              drvmStar_EnableHDMIFreeSyncEDID(Enable);
                              #endif
                              
                              msDisableHDCP();
                              ForceDelay1ms(500);
                              msEnableHDCP();
                              
                              //mStar_SetupInputPort();
              
                  }
              }
C51 COMPILER V9.01   COMBOAPP                                                              03/09/2023 15:39:24 PAGE 4   

              #endif
              //**************************************************************************
              //  [Function Name]:
              //                  msAPI_combo_IPGetPixelClk()
              //  [Description]
              //                  msAPI_combo_IPGetPixelClk
              //  [Arguments]:
              //
              //  [Return]:
              //
              //**************************************************************************
              WORD msAPI_combo_IPGetPixelClk()
              {
                  WORD Pixel_Clock=0;
              
                  if(CURRENT_INPUT_IS_DISPLAYPORT())
                  {
                      #if (ENABLE_DP_INPUT)
                      Pixel_Clock = DPRxGetPixelClk();
                      #endif
                  }
                  else if(CURRENT_INPUT_IS_HDMI())
                  {
                      Combo_printMsg("============2");
                  }
              
                  return Pixel_Clock;
              }
              //**************************************************************************
              //  [Function Name]:
              //                  msAPI_combo_IPGetPixelClk()
              //  [Description]
              //                  msAPI_combo_IPGetPixelClk
              //  [Arguments]:
              //
              //  [Return]:
              //
              //**************************************************************************
              WORD msAPI_combo_IPGetGetHTotal()
              {
                  WORD Htt=0;
              
                  if(CURRENT_INPUT_IS_DISPLAYPORT())
                  {
                      #if (ENABLE_DP_INPUT)
                      Htt = DPRxGetHTotal();
                      #endif
                  }
                  else if(CURRENT_INPUT_IS_HDMI())
                  {
                      Combo_printMsg("============2");
                  }
              
                  return Htt;
              }
              #endif
 232          
 233          #endif
 234          
 235          
 236          #if VGA_Write_EEPROM
              #message "USE VGA 24c02 EDID"
C51 COMPILER V9.01   COMBOAPP                                                              03/09/2023 15:39:24 PAGE 5   

              #else
 239          #message "USE VGA RAM   EDID"
*** MESSAGE C320 IN LINE 239 OF ..\..\KERNEL\SCALER\ComboApp.c: "USE VGA RAM EDID"
 240          #endif
 241          
 242          #if Enable_Func_AdjExpansion
 243          
 244          #else
              #message "Have Some Problem"
              #endif
 247          
 248          #if Enable_FMFlash_Save
              #message "Use FM Flash"
              #else
 251          
 252          #endif
 253          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
